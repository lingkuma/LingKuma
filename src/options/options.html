<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <!-- Add viewport meta tag back for responsiveness -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Options</title>
  <!-- 引入Chart.js库和日期适配器 -->
  <script src="/src/options/chars/chart.js"></script>
  <script src="/src/options/chars/chartjs-adapter-date-fns.js"></script>
  <script src="/src/options/edge_list.js"></script>
  <!-- 引入tgs-player库用于动图预览 -->
  <script src="/src/utils/tgs-player.min.js"></script>

  <style>
    /* 全局字体设置，使用与弹窗相同的字体配置 */
    @font-face {
      font-family: 'Fanwood';
      src: url('../fonts/Fanwood.otf') format('opentype');
      font-weight: normal;
      font-style: normal;
    }

    @font-face {
      font-family: 'Fanwood';
      src: url('../fonts/Fanwood_Bold.otf') format('opentype');
      font-weight: bold;
      font-style: normal;
    }

    @font-face {
      font-family: 'Fanwood';
      src: url('../fonts/Fanwood_Italic.otf') format('opentype');
      font-weight: normal;
      font-style: italic;
    }

    @font-face {
      font-family: 'LXGWWenKai';
      src: url('../fonts/LXGWWenKaiGBLite-Regular.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }

    /* * {
      font-family: "Fanwood", "LXGWWenKai", "PingFang SC", "Segoe UI Variable Display", "Segoe UI", Helvetica, "Microsoft YaHei", "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
    } */

    :root {
      --primary-color: #007aff;
      --secondary-color: #5ac8fa;
      --success-color: #34c759;
      --danger-color: #ff3b30;
      --warning-color: #ffcc00;
      --background-color: #f2f2f7;
      --card-background: #ffffff;
      --text-primary: #000000;
      --text-secondary: #8e8e93;
      --border-color: #e5e5ea;
      --highlight-color: rgba(0, 122, 255, 0.1);
    }

    /* 手动切换的暗色主题 */
    :root.dark-mode {
      --primary-color: #0a84ff;
      --secondary-color: #64d2ff;
      --success-color: #30d158;
      --danger-color: #ff453a;
      --warning-color: #ffd60a;
      --background-color: #2b2b2b;
      --card-background: #3c3c3e;
      --text-primary: #ffffff;
      --text-secondary: #98989d;
      --border-color: #38383a;
      --highlight-color: rgba(10, 132, 255, 0.2);
    }


    body {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
      color: var(--text-primary);
      background-color: var(--background-color);
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      -webkit-font-smoothing: antialiased;
      /* 背景图片样式 */
      background-size: auto;
      background-position: center;
      background-repeat: repeat;
      position: relative;
    }

    /* 添加背景图片遮罩效果 */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--background-color);
      opacity: 0.5; /* 调整透明度以控制背景图片的可见度 */
      z-index: -1;
      pointer-events: none; /* 确保不会拦截鼠标事件 */
    }
    /* 自定义滚动条样式 - 与弹窗一致 */
    ::-webkit-scrollbar {
      width: 8px;  /* 滚动条宽度 */
      background-color: transparent;  /* 滚动条背景透明 */
    }

    ::-webkit-scrollbar-track {
      background: transparent;  /* 滚动条轨道背景透明 */
      margin: 4px 0;  /* 上下留出一点空间 */
    }

    ::-webkit-scrollbar-thumb {
      background-color: rgba(221, 221, 221, 0.6);  /* 半透明浅灰色 */
      border-radius: 4px;  /* 滚动条圆角 */
      border: 2px solid transparent;  /* 透明边框 */
      background-clip: padding-box;  /* 确保背景不会延伸到边框下 */
      transition: background-color 0.3s;  /* 添加过渡效果 */
    }

    /* 鼠标悬停时滚动条样式 */
    ::-webkit-scrollbar-thumb:hover {
      background-color: rgba(200, 200, 200, 0.8);  /* 悬停时更深的颜色 */
    }

    /* 暗色模式下的滚动条 */
    :root.dark-mode ::-webkit-scrollbar-thumb {
      background-color: rgba(85, 85, 85, 0.6);  /* 半透明深灰色 */
      border: 2px solid transparent;  /* 透明边框 */
      background-clip: padding-box;  /* 确保背景不会延伸到边框下 */
    }

    /* 暗色模式下鼠标悬停时滚动条样式 */
    :root.dark-mode ::-webkit-scrollbar-thumb:hover {
      background-color: rgba(100, 100, 100, 0.8);  /* 悬停时更深的颜色 */
    }

    /* WebDAV状态悬浮样式 - 暗色模式       color: var(--text-primary) !important;*/
    :root.dark-mode #webdavStatus {
      background-color: rgba(43, 43, 43, 0.95) !important;
      border: 1px solid rgba(255, 255, 255, 0.1) !important;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
    }

    /* WebDAV状态悬浮样式 - 确保在所有情况下都能正确显示 */
    #webdavStatus {
      pointer-events: auto;
      user-select: text;
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
    }

    .sidebar {
      width: 240px;
      /* 半透明背景 */
      background-color: rgba(255, 255, 255, 0.2);
      padding: 20px 0;
      box-sizing: border-box;
      border-right: 1px solid rgba(255, 255, 255, 0.3);
      overflow-y: overlay; /* 使用overlay代替auto，让滚动条覆盖在内容上而不占用空间 */
      max-height: 100vh; /* 最大高度为视口高度 */

      /* 背景模糊 - 玻璃效果的关键 */
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);

      /* 阴影 */
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.18);
    }

    /* 暗色模式下的玻璃效果 */
    :root.dark-mode .sidebar {
      background-color: rgba(25, 25, 25, .8);
      border-right: 1px solid rgba(64, 64, 64, 0.3);
    }
    .sidebar button {
      display: block;
      width: 90%;
      margin: 5px auto;
      padding: 12px 15px;
      border: none;
      border-radius: 10px;
      background-color: transparent;
      cursor: pointer;
      text-align: left;
      transition: all 0.2s ease;
      font-size: 15px;
      font-weight: 400;
      color: var(--text-primary);
    }
    .sidebar button:hover {
      background-color: var(--highlight-color);
    }
    .sidebar button.active {
      color: var(--primary-color);
      font-weight: 500;
    }
    .main-content {
      flex: 1;
      padding: 25px;
      overflow-y: overlay; /* 使用overlay代替auto，让滚动条覆盖在内容上而不占用空间 background-color: var(--background-color); */

    }
    .hidden {
      display: none;
    }
    /* 表格（单词列表）样式 */
    h1, h2, h3 {
      font-weight: 600;
    }
    h1 {
      font-size: 26px;
      margin-bottom: 20px;
      color: var(--text-primary);
    }
    h2 {
      font-size: 22px;
      margin-bottom: 15px;
      color: var(--text-primary);
    }
    h3 {
      font-size: 18px;
      margin-bottom: 12px;
      color: var(--text-primary);
    }
    .filter-section {
      padding: 16px;
      border-radius: 12px;
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.18);

      /* 背景模糊 - 玻璃效果 */
      background-color: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    /* 暗色模式下的玻璃效果 */
    :root.dark-mode .filter-section {
      background-color: rgba(25, 25, 25, .8);
      border: 1px solid rgba(64, 64, 64, 0.3);
    }
    button {
      padding: 10px 20px;
      border-radius: 10px;
      border: none;
      background-color: #3e4e5f99;
      color: white;
      cursor: pointer;
      transition: all 0.2s;
      font-weight: 500;
      font-size: 15px;
    }
    button:hover {
      opacity: 0.9;
    }
    button:active {
      opacity: 0.7;
      transform: scale(0.98);
    }
    #applyFilterBtn {
      background-color: var(--primary-color);
    }
    select, input, textarea {
      padding: 12px 15px;
      border: 1px solid var(--border-color);
      border-radius: 10px;
      font-family: inherit;
      font-size: 15px;
      background-color: var(--card-background);
      color: var(--text-primary);
      -webkit-appearance: none;
      appearance: none;
      box-sizing: border-box;
    }
    textarea {
      resize: vertical;
      overflow-y: hidden;
      min-height: 300px;
    }
    select {
      background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg width='12' height='12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6 9L1 4h10z' fill='%238E8E93'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 30px;
    }
    select:focus, input:focus, textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 1px var(--primary-color);
    }
    .word-list {
      margin: 20px 0;
    }
    .word-item {
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 12px;
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.18);
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: all 0.2s;

      /* 背景模糊 - 玻璃效果 */
      background-color: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    /* 暗色模式下的玻璃效果 */
    :root.dark-mode .word-item {
      background-color: rgba(25, 25, 25, .8);
      border: 1px solid rgba(64, 64, 64, 0.3);
    }
    .word-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
    }
    .import-section, .backup-section, .settings-section {
      /* 半透明背景 */
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 25px;

      /* 背景模糊 - 玻璃效果的关键 */
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);

      /* 边框和阴影 */
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.18);
    }

    /* 暗色模式下的玻璃效果 */
    :root.dark-mode .import-section,
    :root.dark-mode .backup-section,
    :root.dark-mode .settings-section {
      background-color: rgba(25, 25, 25, .8);
      border: 1px solid rgba(64, 64, 64, 0.3);
    }
    .word-language, .word-status {
      font-size: 13px;
      padding: 3px 8px;
      border-radius: 10px;
      font-weight: 500;
      display: inline-block;
    }
    .word-language {
      font-size: 13px;
      padding: 4px 8px;
      border-radius: 10px;
      font-weight: 500;
      display: inline-block;
      background-color: rgba(90, 200, 250, 0.15);
      color: var(--secondary-color);
      min-width: 40px;
      text-align: center;
    }
    .word-status {
      font-size: 13px;
      padding: 4px 8px;
      border-radius: 10px;
      font-weight: 500;
      display: inline-block;
      background-color: rgba(0, 122, 255, 0.15);
      color: var(--primary-color);
      min-width: 70px;
      text-align: center;
    }
    a {
      color: var(--primary-color);
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .pagination {
      margin-top: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }
    .pagination button {
      background-color: var(--card-background);
      color: var(--primary-color);
      border: 1px solid var(--border-color);
      padding: 8px 15px;
    }
    .pagination button:hover {
      background-color: var(--highlight-color);
    }
    #pageInfo {
      color: var(--text-secondary);
      font-size: 14px;
    }

    /* 可展开单词列表项样式 */
    .expandable-word-item .word-item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 500;
        cursor: pointer; /* 只有标题栏可点击 */
    }

    /* 新增：单词表格列样式 */
    .word-column, .language-column, .status-column {
        display: flex;
        align-items: center;
    }

    .word-column {
        flex: 2;
    }

    .language-column, .status-column {
        flex: 1;
        justify-content: flex-end; /* 使内容靠右显示 */
        text-align: right; /* 文本靠右 */
    }

    /* 确保标签在靠右对齐时看起来更好 */
    .language-column .word-language,
    .status-column .word-status {
        margin-left: auto; /* 将标签推到右侧 */
    }

    /* 新增：表头样式 */
    .word-table-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 600;
        padding: 12px 15px;
        margin-bottom: 8px;
        border-radius: 10px;
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.18);
        border: 1px solid rgba(255, 255, 255, 0.3);

        /* 背景模糊 - 玻璃效果 */
        background-color: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
    }

    /* 暗色模式下的玻璃效果 */
    :root.dark-mode .word-table-header {
        background-color: rgba(25, 25, 25, .8);
        border: 1px solid rgba(64, 64, 64, 0.3);
    }

    .expandable-word-item .word-item-header .word-text-display { /* 用于单词文本本身 */
        flex-grow: 1;
        margin-right: 10px; /* 与图标的间距 */
    }

    .expandable-word-item .expand-icon {
        font-size: 1.2em; /* 图标大小 */
        transition: transform 0.2s ease-in-out;
        padding: 0 5px; /* 给图标一些点击区域 */
    }

    .expandable-word-item .expand-icon.rotated {
        transform: rotate(90deg);
    }

    .expandable-word-item .word-item-details {
        display: none; /* 默认隐藏 */
        padding: 15px 20px; /* 增加内边距 */
        margin-top: 10px; /* 与头部的间距 */
        border-top: 1px solid var(--border-color); /* 分隔线 */
        font-size: 1.1em; /* 增大字体 */
        color: var(--text-primary); /* 改为主要文本颜色，提高可读性 */
        line-height: 1.8; /* 增加行高以便阅读 */
        cursor: default; /* 确保内容区域不显示指针样式 */
        overflow-y: auto; /* 允许内容区域垂直滚动 */
        max-height: 500px; /* 设置最大高度，超出时显示滚动条 */
    }

    .word-item-details .detail-label {
        font-weight: 600;
        color: var(--text-primary);
        margin-right: 8px; /* 增加与内容间距 */
        font-size: 1.1em; /* 增大标签文字 */
    }

    .word-item-details .detail-content {
        color: var(--text-primary);
        font-size: 1.1em; /* 增大内容文字 */
    }

    .word-item-details .detail-list {
        list-style-type: none;
        padding-left: 0;
      /*  margin-top: 10px;  增加上边距 */
     /*    margin-bottom: 15px; 增加下边距 */
    }

    .word-item-details .detail-list li {
        padding: 5px 0; /* 增加内边距 */
        border-bottom: 1px dashed var(--border-color);
        font-size: 1.05em; /* 增大列表文字 */
    }

    /* 翻译条目样式 */
    .word-item-details .detail-list .translation-item {
        font-size: 1.2em; /* 比普通文本更大的字体 */
        padding: 8px 0; /* 增加上下内边距 */
        color: var(--text-primary); /* 主要文本颜色 */
        font-weight: 500; /* 略微加粗 */
        line-height: 1.6; /* 行高 */
    }

    .word-item-details .sentence-item {
        margin-bottom: 12px; /* 增加下边距 */
        padding-bottom: 12px; /* 增加内边距 */
        border-bottom: 1px dashed var(--border-color);
    }

    .word-item-details .sentence-original {
        /*  font-style: italic;*/
        font-size: 1.05em; /* 增大原始句子文字 */
        margin-bottom: 5px; /* 与翻译间的间距 */
    }

    .word-item-details .sentence-translation {
        margin-left: 10px;
        font-size: 1.05em; /* 增大翻译文字 */
        margin-bottom: 5px; /* 与URL间的间距 */
    }

    .word-item-details .sentence-url {
        font-size: 0.95em;
        margin-left: 10px;
    }

    .word-item-details .tag-item {
        display: inline-block;
        background-color: var(--highlight-color);
        color: var(--primary-color);
        padding: 4px 10px; /* 增加内边距 */
        border-radius: 5px; /* 增加圆角 */
        margin-right: 8px; /* 增加右间距 */
     /*   margin-bottom: 6px;  增加下边距 */
        font-size: 1em; /* 增大标签文字 */
    }

    /* 新增：单词详情部分的各区域样式 */
    .word-detail-section {
        margin-bottom: 15px; /* 区域间距 */
       /*  padding-bottom: 10px; 区域内边距 */
    }

    /* 标签容器样式 */
    .word-details-container .tags-container {
        display: flex;
        flex-wrap: wrap;
        margin-top: 5px;
    }

    /* 例句容器样式 */
    .word-details-container .sentences-container {
        margin-top: 10px;
    }

    .expandable-word-item .word-item-details.expanded {
        display: block;
    }

    /* 底部原型和时间区域样式 */
    .word-details-container div.word-detail-section:last-child {
        margin-top: 20px;
        padding-top: 15px;
        border-top: 1px solid var(--border-color);
        opacity: 0.85;
    }

    .word-details-container div.word-detail-section:last-child .detail-label,
    .word-details-container div.word-detail-section:last-child .detail-content {
        font-size: 0.95em;
        color: var(--text-secondary);
    }

    /* 调整原有的 .word-item 样式，使其更适合作为可展开项的容器 */
    .word-item { /* expandable-word-item 将基于此 */
        padding: 12px 15px; /* 统一内边距 */
        margin-bottom: 8px;
        border-radius: 10px; /* 调整圆角 */
        background-color: var(--card-background);
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        border: 1px solid var(--border-color);
        transition: all 0.2s;
    }
    .word-item:hover {
        transform: translateY(-1px); /* 轻微上浮 */
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    }

    .word-item-details .word-language,
    .word-item-details .word-status {
        margin-right: 8px; /* 标签之间的间距 */
        margin-bottom: 5px; /* 如果有多个标签，垂直间距 */
    }

    /* iOS 风格的开关控件 */
    .setting-item input[type="checkbox"] {
      position: relative;
      width: 50px;
      height: 30px;
      -webkit-appearance: none;
      appearance: none;
      background-color: var(--border-color);
      border-radius: 25px;
      transition: 0.3s;
      cursor: pointer;
    }
    .setting-item input[type="checkbox"]:checked {
      background-color: var(--success-color);
    }
    .setting-item input[type="checkbox"]::before {
      content: '';
      position: absolute;
      width: 26px;
      height: 26px;
      border-radius: 50%;
      top: 2px;
      left: 2px;
      background-color: #fff;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
      transition: 0.3s;
    }
    .setting-item input[type="checkbox"]:checked::before {
      left: 22px;
    }
    /* 毛玻璃效果元素 */
    .glass-effect {
      background-color: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    /* 专门为导入组件添加样式 */
    .import-options div {
      margin-bottom: 15px;
    }
    .import-options label {
      display: inline-block;
      margin-bottom: 5px;
      font-weight: 500;
      color: var(--text-primary);
    }
    progress {
      width: 100%;
      height: 8px;
      border-radius: 4px;
      -webkit-appearance: none;
      appearance: none;
    }
    progress::-webkit-progress-bar {
      background-color: var(--border-color);
      border-radius: 4px;
    }
    progress::-webkit-progress-value {
      background-color: var(--primary-color);
      border-radius: 4px;
    }
    /* 适配备份和配置面板 */
    #backupFile, #backupConfigFile, #importFile {
      padding: 12px;
      margin-bottom: 10px;
      border-radius: 10px;
      border: 1px dashed rgba(255, 255, 255, 0.3);

      /* 背景模糊 - 玻璃效果 */
      background-color: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.18);
    }

    /* 暗色模式下的玻璃效果 */
    :root.dark-mode #backupFile,
    :root.dark-mode #backupConfigFile,
    :root.dark-mode #importFile {
      background-color: rgba(25, 25, 25, .8);
      border: 1px dashed rgba(64, 64, 64, 0.3);
    }
    /* 状态信息样式 */
    #importStatus, #backupStatus, #backupConfigStatus {
      padding: 10px;
      border-radius: 10px;
      margin-top: 10px;
      font-size: 14px;
    }
    /* 表格样式 */
    .word-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.18);

      /* 背景模糊 - 玻璃效果 */
      background-color: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    /* 暗色模式下的玻璃效果 */
    :root.dark-mode .word-table {
      background-color: rgba(25, 25, 25, .8);
      border: 1px solid rgba(64, 64, 64, 0.3);
    }
    .word-table thead {
      background-color: rgba(10, 132, 255, 0.1);
    }
    .word-table th {
      padding: 15px;
      text-align: left;
      font-weight: 600;
      color: var(--text-primary);
      border-bottom: 1px solid var(--border-color);
    }
    .word-table td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid var(--border-color);
    }
    .word-table tbody tr:last-child td {
      border-bottom: none;
    }
    .word-table tbody tr:hover {
      background-color: var(--highlight-color);
    }
    .word-table .no-data {
      text-align: center;
      padding: 20px;
      color: var(--text-secondary);
    }
    .word-row {
      transition: all 0.2s ease;
    }
    /* 确保表格列宽合适 */
    .word-table th:nth-child(1) {
      width: 50%;
    }
    .word-table th:nth-child(2) {
      width: 20%;
    }
    .word-table th:nth-child(3) {
      width: 30%;
    }
    /* 自定义单选按钮样式 */
    .radio-group {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .radio-item {
      display: flex;
      align-items: center;
      cursor: pointer;
    }

    .radio-item input[type="radio"] {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border: 2px solid var(--border-color);
      border-radius: 50%;
      margin-right: 8px;
      position: relative;
      cursor: pointer;
      background-color: var(--card-background);
    }

    .radio-item input[type="radio"]:checked {
      border-color: var(--primary-color);
    }

    .radio-item input[type="radio"]:checked::before {
      content: '';
      position: absolute;
      width: 12px;
      height: 12px;
      background-color: var(--primary-color);
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .radio-item:hover input[type="radio"] {
      border-color: var(--primary-color);
    }

    .radio-item label {
      cursor: pointer;
    }

    /* 在已有的 style 标签中添加 */
    .settings-section label {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 12px;
      display: block;
    }

    /* 主题切换按钮样式 */
    .theme-button {
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 8px;
      border-radius: 50%;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s;
    }

    .theme-button:hover {
      background-color: var(--highlight-color);
    }

    .theme-icon {
      width: 20px;
      height: 20px;
    }

    /* 暗色模式图标动画 */
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .theme-button:hover .theme-icon {
      animation: rotate 1s linear;
    }

    /* 添加二级菜单样式 */
    .sidebar .submenu {
      margin-left: 15px;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .sidebar .submenu.expanded {
      max-height: 500px; /* 足够高以容纳所有子菜单 */
    }

    .sidebar .menu-item {
      width: 90%;
      margin: 5px auto;
      padding: 12px 15px;
      border: none;
      border-radius: 10px;
      background-color: transparent;
      cursor: pointer;
      text-align: left;
      transition: all 0.2s ease;
      font-size: 15px;
      font-weight: 400;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .sidebar .menu-item:hover {
      background-color: var(--highlight-color);
    }

    .sidebar .menu-item.active {
      color: var(--primary-color);
      font-weight: 500;
    }

    .sidebar .menu-item .arrow {
      transition: transform 0.3s ease;
    }

    .sidebar .menu-item .arrow.rotated {
      transform: rotate(90deg);
    }

    /* 子菜单展开样式 */
    .submenu.expanded {
      max-height: 500px; /* 足够大的值以容纳所有子菜单项 */
    }

    /* 子菜单项样式 */
    .submenu-item {
      padding: 8px 15px;
      margin-bottom: 5px;
      width: 100%;
      text-align: left;
      border: none;
      background-color: transparent;
      color: var(--text-secondary);
      cursor: pointer;
      transition: background-color 0.2s;
      border-radius: 6px;
    }

    .submenu-item:hover {
      background-color: var(--hover-background);
      color: var(--text-primary);
    }

    .submenu-item.active {
      background-color: var(--active-background);
      color: var(--text-primary);
      font-weight: 500;
    }

    /* 多语言提示框样式 */
    .multilingual-note {
      margin: 15px 0;
      padding: 12px 15px;
      border-left: 4px solid var(--primary-color);
      border-radius: 8px;
      font-size: 14px;

      /* 背景模糊 - 玻璃效果 */
      background-color: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.18);
    }

    /* 暗色模式下的玻璃效果 */
    :root.dark-mode .multilingual-note {
      background-color: rgba(25, 25, 25, .8);
      border: 1px solid rgba(64, 64, 64, 0.3);
      border-left: 4px solid var(--primary-color);
    }

    .multilingual-note .note-title {
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--primary-color);
    }

    .multilingual-note .note-content {
      margin-bottom: 10px;
    }

    .multilingual-note .note-content:last-child {
      margin-bottom: 0;
    }

    .multilingual-note .lang-tag {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      margin-right: 6px;
      color: white;
    }

    .multilingual-note .lang-en {
      background-color: var(--primary-color);
    }

    .multilingual-note .lang-zh {
      background-color: var(--success-color);
    }

    .multilingual-note .lang-ja {
      background-color: var(--secondary-color);
    }

    .multilingual-note .lang-de {
      background-color: var(--warning-color);
      color: var(--text-primary);
    }

    .dark-mode .multilingual-note .lang-de {
      color: #000000;
    }

    /* 单词列表与筛选器的新布局 */
    .table-container {
      display: flex;
      gap: 20px;
      position: relative;
    }

    .wordlist-section {
      flex: 1;
      min-width: 0; /* 确保flex布局正确 */
    }

    .filter-section {
      width: 280px;
      background-color: var(--card-background);
      border-radius: 12px;
      padding: 12px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .sticky-filter {
      position: sticky;
      top: 20px;
      align-self: flex-start;
      max-height: calc(100vh - 40px);
      overflow-y: auto;
    }

    .filter-section h3 {
      margin-top: 0;
      margin-bottom: 15px;
      color: var(--text-primary);
      font-size: 16px;
      font-weight: 600;
    }

    .filter-item {
      margin-bottom: 10px;
    }

    .filter-item label {
      display: block;
      margin-bottom: 4px;
      font-weight: 500;
      font-size: 13px;
    }

    .filter-item select {
      width: 100%;
      padding: 6px;
      border-radius: 6px;
      border: 1px solid var(--border-color);
      background-color: var(--input-background);
      color: var(--text-primary);
      font-size: 13px;
    }

    #applyFilterBtn {
      width: 100%;
      margin-top: 10px;
    }

    /* 确保单词表格响应式适应新布局 */
    .word-table {
      width: 100%;
    }

    /* 移动设备适配 */
    @media (max-width: 768px) {
      .table-container {
        flex-direction: column;
      }

      .filter-section {
        width: 100%;
        position: static;
        order: -1; /* 在移动设备上筛选器显示在单词列表之前 */
      }
    }

    /* 筛选器黑暗模式适配 - 已在上面定义过，这里可以删除 */

    .dark-mode .filter-item select {
      background-color: var(--input-background);
      color: var(--text-primary);
      border-color: var(--border-color);
    }

    .dark-mode .filter-item select option {
      background-color: var(--card-background);
      color: var(--text-primary);
    }

    .dark-mode #applyFilterBtn {
      background-color: var(--primary-color);
      color: white;
      border: none;
    }

    .dark-mode .filter-section h3 {
      color: var(--text-primary);
    }

    /* 日期筛选警告框样式 */
    .date-filter-container {
      background-color: rgba(255, 255, 255, 0.05);
    }

    .dark-mode .date-filter-container {
      background-color: rgba(0, 0, 0, 0.2);
      border-color: var(--border-color);
    }

    .dark-mode .date-filter-warning {
      background-color: rgba(255, 204, 0, 0.2);
      color: var(--warning-color);
    }

    /* 状态筛选复选框样式 - 隐藏复选框,只显示背景高亮 */
    .filter-item input[type="checkbox"] {
      display: none;
    }

    .filter-item label:has(input[type="checkbox"]) {
      transition: background-color 0.2s;
      border-radius: 4px;
      padding: 6px 12px !important;
      display: block !important;
    }

    .filter-item label:has(input[type="checkbox"]):hover {
      background-color: var(--highlight-color);
    }

    .filter-item label:has(input[type="checkbox"]:checked) {
      background-color: rgba(0, 122, 255, 0.2);
      font-weight: 500;
    }

    .dark-mode .filter-item label:has(input[type="checkbox"]:checked) {
      background-color: rgba(10, 132, 255, 0.3);
    }

    /* 单词列表复选框样式 - 自定义外观 */
    .word-checkbox {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border: 2px solid var(--border-color);
      border-radius: 4px;
      background-color: var(--card-background);
      cursor: pointer;
      position: relative;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .word-checkbox:hover {
      border-color: var(--primary-color);
    }

    .word-checkbox:checked {
      background-color: var(--primary-color);
      border-color: var(--primary-color);
    }

    .word-checkbox:checked::after {
      content: '✓';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 14px;
      font-weight: bold;
    }

    /* 暗色模式下的复选框 */
    :root.dark-mode .word-checkbox {
      border-color: var(--border-color);
      background-color: var(--card-background);
    }

    :root.dark-mode .word-checkbox:checked {
      background-color: var(--primary-color);
      border-color: var(--primary-color);
    }

    /* 统计图表样式 */
    .stats-container {
      display: flex;
      gap: 20px;
      position: relative;
    }

    .chart-section {
      flex: 1;
      min-width: 0;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.18);
      height: 90vh; /* 设置为视口高度的90%，使图表能够占据大部分屏幕 */

      /* 背景模糊 - 玻璃效果 */
      background-color: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    /* 暗色模式下的玻璃效果 */
    :root.dark-mode .chart-section {
      background-color: rgba(25, 25, 25, .8);
      border: 1px solid rgba(64, 64, 64, 0.3);
    }

    .chart-container {
      width: 100%;
      height: 90%;
      position: relative;
    }

    /* 复选框样式 */
    .checkbox-item {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
    }

    .checkbox-item input[type="checkbox"] {
      margin-right: 8px;
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    .checkbox-item label {
      cursor: pointer;
    }

    /* 筛选按钮高亮样式 */
    .filter-buttons button.active {
      background-color: var(--primary-color);
      color: white;
      font-weight: 500;
    }

    /* 响应式布局 */
    @media (max-width: 768px) {
      .stats-container {
        flex-direction: column;
      }

      .chart-section {
        order: -1;
      }

      .chart-container {
        height: 300px;
      }
    }

    /* 状态筛选按钮样式 */
    .stats-container .filter-section .filter-item > div > .checkbox-item {
        padding: 8px 12px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.2s, border-color 0.2s, color 0.2s;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        justify-content: center; /* 让文字居中，更像按钮 */
        text-align: center;
    }

    .stats-container .filter-section .filter-item > div > .checkbox-item:hover {
        background-color: var(--highlight-color);
    }

    .stats-container .filter-section .filter-item > div > .checkbox-item.active {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
        color: white;
    }

    .stats-container .filter-section .filter-item > div > .checkbox-item.active label {
        color: white; /* 确保label文字在active时也是白色 */
    }

    /* 隐藏原始的checkbox，因为我们将通过父元素的样式来反馈选中状态 */
    .stats-container .filter-section .filter-item > div > .checkbox-item input[type="checkbox"] {
        display: none;
    }

 /* Hamburger Menu Button Styles */
  #menu-toggle {
      display: none; /* Hidden by default on desktop */
      position: fixed; /* Or absolute relative to a container */
      top: 15px;
      left: 15px;
      z-index: 1100; /* Above sidebar */
      border-radius: 8px;
      padding: 8px 10px;
      cursor: pointer;
      font-size: 20px;
      line-height: 1;
      color: var(--text-primary);

      /* 背景模糊 - 玻璃效果 */
      background-color: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.18);
    }

    /* 暗色模式下的玻璃效果 */
    :root.dark-mode #menu-toggle {
      background-color: rgba(25, 25, 25, .8);
      border: 1px solid rgba(64, 64, 64, 0.3);
    }
    #menu-toggle:hover {
      background-color: var(--highlight-color);
    }

    /* Sidebar Overlay for mobile */
    #sidebar-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.4);
      z-index: 999; /* Below sidebar, above content */
    }

    /* Responsive Adjustments for Mobile */
    @media (max-width: 768px) {
      #menu-toggle {
        display: block; /* Show hamburger on mobile */
      }

      .sidebar {
        position: fixed; /* Take out of flow */
        left: 0;
        top: 0;
        height: 100%;
        z-index: 1000; /* Above content */
        transform: translateX(-100%); /* Hide off-screen */
        border-right: 1px solid var(--border-color); /* Keep border */
        box-shadow: 2px 0 5px rgba(0,0,0,0.1); /* Add shadow */
        overflow-y: auto; /* 确保在移动设备上也可以滚动 */
        max-height: 100%; /* 确保可以滚动到底部 */
        padding-bottom: 50px; /* 底部添加额外空间，确保最后的菜单项可见 */
      }

      .main-content {
        margin-left: 0; /* Occupy full width */
        padding: 25px 15px; /* Adjust padding */
      }

      /* State when sidebar is open */
      body.sidebar-open .sidebar {
        transform: translateX(0); /* Slide in */
      }

      body.sidebar-open #sidebar-overlay {
        display: block; /* Show overlay */
      }

       /* Adjust theme/language selector position */
       /* Maybe hide it or move it inside the sidebar? */
       /* For now, just move it down slightly */
      div[style*="position: absolute; top: 10px; right: 20px;"] {
         top: 60px; /* Move below hamburger button */
         right: 15px;
       }

    }

    /* 翻译条目样式 */
    .translation-item {
        font-size: 1.2em !important; /* 比普通文本更大的字体 */
        padding: 8px 0 !important; /* 增加上下内边距 */
        color: var(--text-primary) !important; /* 主要文本颜色 */
        font-weight: 500 !important; /* 略微加粗 */
        line-height: 1.6 !important; /* 行高 */
    }

    /* 动画开关样式 */
    .animation-toggle-label {
      display: flex;
      align-items: center;
      cursor: pointer;
      gap: 10px;
    }

    .animation-toggle-checkbox {
      position: relative;
      width: 50px;
      height: 26px;
      appearance: none;
      background: #ccc;
      border-radius: 13px;
      outline: none;
      cursor: pointer;
      transition: background 0.3s;
    }

    .animation-toggle-checkbox:checked {
      background: var(--primary-color);
    }

    .animation-toggle-checkbox::before {
      content: '';
      position: absolute;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: white;
      top: 2px;
      left: 2px;
      transition: transform 0.3s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .animation-toggle-checkbox:checked::before {
      transform: translateX(24px);
    }

    .animation-toggle-text {
      font-weight: 500;
      user-select: none;
    }

    /* 动图选择卡片样式 */
    .animation-card {
      position: relative;
      padding: 10px;
      border: 2px solid var(--border-color);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      background: var(--background-color);
      text-align: center;
    }

    .animation-card:hover {
      border-color: var(--primary-color);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .animation-card.selected {
      border-color: var(--primary-color);
      background: rgba(0, 122, 255, 0.1);
    }

    .animation-card.selected::after {
      content: '✓';
      position: absolute;
      top: 5px;
      right: 5px;
      width: 24px;
      height: 24px;
      background: var(--primary-color);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 14px;
    }

    .animation-card-preview {
      width: 100%;
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 8px;
      background: rgba(0,0,0,0.02);
      border-radius: 4px;
    }

    .animation-card-name {
      font-size: 12px;
      color: var(--text-color);
      font-weight: 500;
    }

    /* 登录状态显示样式 */
    #cloudLoginStatus {
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 16px;
      background: linear-gradient(135deg, var(--card-background) 0%, rgba(0, 122, 255, 0.05) 100%);
      border: 1px solid var(--border-color);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }

    #cloudLoginStatus p {
      margin: 8px 0;
      font-size: 14px;
      color: var(--text-primary);
    }

    #cloudLoginStatus strong {
      color: var(--primary-color);
      font-weight: 600;
    }

    #cloudLoginStatus span {
      color: var(--text-secondary);
    }

    #cloudUsername {
      font-weight: 600;
      color: var(--primary-color);
    }

    #cloudSubscriptionStatus,
    #cloudExpiresAt,
    #cloudDataServer,
    #cloudAfdianId,
    #cloudPlanName,
    #cloudStorage {
      font-weight: 500;
      color: var(--text-primary);
    }

    #cloudStorage {
      color: var(--success-color);
    }

    /* 暗色模式下的登录状态 */
    :root.dark-mode #cloudLoginStatus {
      background: linear-gradient(135deg, var(--card-background) 0%, rgba(10, 132, 255, 0.1) 100%);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* 捐赠按钮样式 - Creepy Button */
    .donation-button-container {
      margin: 20px 0;
      display: flex;
      gap: 20px;
      align-items: flex-start;
      flex-wrap: wrap;
    }

    .creepy-btn {
      background-color: hsl(0 0% 0%);
      border-radius: 1.25em;
      color: hsl(223deg 10% 95%);
      cursor: pointer;
      letter-spacing: 1px;
      min-width: 9em;
      outline: 0.1875em solid transparent;
      transition: outline 0.1s linear;
      -webkit-tap-highlight-color: transparent;
      position: relative;
      font-size: clamp(1rem, 0.8rem + 1vw, 1.5rem);
      border: none;
      padding: 0.5em 1em;
      height: 45px;
    }

    .creepy-btn__cover {
      background-color: #8060DA;
      box-shadow: 0 0 0 0.125em hsl(0 0% 0%) inset;
      padding: 0.5em 1em;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 10;
      border-radius: inherit;
      display: flex;
      align-items: center;
      justify-content: center;
      transform-origin: 1.25em 50%;
      transition:
        background-color 0.3s,
        transform 0.3s cubic-bezier(0.65, 0, 0.35, 1);
    }

    .creepy-btn__eye {
      animation: eye-blink 3s infinite;
      background-color: hsl(223deg 10% 95%);
      border-radius: 50%;
      overflow: hidden;
      width: 0.75em;
      height: 0.75em;
      position: relative;
    }

    .creepy-btn__eyes {
      position: absolute;
      display: flex;
      align-items: center;
      gap: 0.375em;
      right: 1em;
      bottom: 0.5em;
      height: 0.75em;
      z-index: 1;
    }

    .creepy-btn__pupil {
      position: absolute;
      background-color: hsl(0 0% 0%);
      aspect-ratio: 1;
      top: 50%;
      left: 50%;
      width: 0.375em;
      border-radius: inherit;
      transform: translate(-50%, -50%);
      transition: transform 0.1s ease;
    }

    .creepy-btn:focus-visible {
      outline: 0.1875em solid #a08beb;
    }

    .creepy-btn:hover .creepy-btn__cover {
      background-color: #7050ca;
    }

    .creepy-btn:focus-visible .creepy-btn__cover,
    .creepy-btn:hover .creepy-btn__cover {
      transform: rotate(-12deg);
      transition-timing-function: cubic-bezier(0.65, 0, 0.35, 1.65);
    }

    .creepy-btn:active .creepy-btn__cover {
      transform: rotate(0);
      transition-timing-function: cubic-bezier(0.65, 0, 0.35, 1);
    }

    @keyframes eye-blink {
      0%,
      92%,
      100% {
        animation-timing-function: cubic-bezier(0.32, 0, 0.67, 0);
        height: 0.75em;
      }

      96% {
        animation-timing-function: cubic-bezier(0.33, 1, 0.68, 1);
        height: 0;
      }
    }

    /* WeChat 按钮样式 */
    .wechat-donation-wrapper {
      position: relative;
      display: inline-block;
    }

    .wechat-btn .creepy-btn__cover {
      background-color: #07c160; /* WeChat 绿色 */
    }

    .wechat-btn:hover .creepy-btn__cover {
      background-color: #06ad56; /* WeChat 深绿色 */
    }

    /* 二维码容器样式 */
    .qrcode-container {
      position: absolute;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      background: #ffffff;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
      z-index: 1000;
      min-width: 280px;
      text-align: center;
    }

    /* 悬浮时显示二维码（但不包括已关闭状态） */
    .wechat-donation-wrapper:hover .qrcode-container:not(.closed) {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }

    /* 固定显示状态 */
    .qrcode-container.show {
      opacity: 1 !important;
      visibility: visible !important;
      transform: translateX(-50%) translateY(0) !important;
    }

    /* 关闭状态（优先级最高） */
    .qrcode-container.closed {
      opacity: 0 !important;
      visibility: hidden !important;
    }

    /* 二维码图片样式 */
    .qrcode-image {
      width: 240px;
      height: 240px;
      object-fit: contain;
      border-radius: 8px;
      margin-bottom: 12px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    /* 二维码提示文字 */
    .qrcode-hint {
      margin: 0;
      color: #666;
      font-size: 14px;
      font-weight: 500;
    }

    /* 关闭按钮样式 */
    .qrcode-close {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 28px;
      height: 28px;
      border: none;
      background: #f0f0f0;
      color: #666;
      border-radius: 50%;
      cursor: pointer;
      font-size: 20px;
      line-height: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      padding: 0;
      z-index: 10;
    }

    .qrcode-close:hover {
      background: #e0e0e0;
      color: #333;
      transform: rotate(90deg);
    }

    .qrcode-close:active {
      transform: rotate(90deg) scale(0.95);
    }

    /* 暗色模式适配 */
    :root.dark-mode .qrcode-container {
      background: #2a2a2a;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    }

    :root.dark-mode .qrcode-hint {
      color: #b0b0b0;
    }

    :root.dark-mode .qrcode-close {
      background: #3a3a3a;
      color: #b0b0b0;
    }

    :root.dark-mode .qrcode-close:hover {
      background: #4a4a4a;
      color: #ffffff;
    }

    /* 移动端优化 */
    @media (max-width: 768px) {
      .donation-button-container {
        flex-direction: column;
        align-items: stretch;
      }

      .wechat-donation-wrapper {
        width: 100%;
      }

      .creepy-btn {
        width: 100%;
      }

      .qrcode-container {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        max-width: 90vw;
      }

      .wechat-donation-wrapper:hover .qrcode-container {
        transform: translate(-50%, -50%);
      }

      .qrcode-container.show {
        transform: translate(-50%, -50%) !important;
      }
    }

  </style>
</head>
<body>
  <button id="menu-toggle" aria-label="Toggle Menu">☰</button>
  <div id="sidebar-overlay"></div>

  <!-- 将主题切换按钮和语言选择器放在一起 -->
  <div style="position: absolute; top: 10px; right: 20px; z-index: 1000; display: flex; gap: 10px; align-items: center;">


    <button id="theme-switch" class="theme-button" aria-label="切换主题">
      <svg class="theme-icon light-icon" viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor" d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5s5-2.24 5-5s-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0c-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0c-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0c.39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41c-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41c-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>
      </svg>
      <svg class="theme-icon dark-icon" viewBox="0 0 24 24" width="24" height="24" style="display:none;">
        <path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/>
      </svg>
    </button>
    <select id="ui-language">
      <option value="zh">中文</option>
      <option value="zh_TW">繁體中文</option>
      <option value="en">English</option>
      <option value="de">Deutsch</option>
      <option value="fr">Français</option>
      <option value="es">Español</option>
      <option value="ja">日本語</option>
      <option value="ko">한국어</option>
      <option value="ru">Русский</option>
      <option value="it">Italiano</option>
    </select>
  </div>







  <!-- 侧栏 -->
  <div class="sidebar">

    <!-- 新增：数据库操作菜单 -->
    <button id="menu-database" class="menu-item">
      <span data-i18n="databaseOperations">数据库操作</span>
      <span class="arrow">▶</span>
    </button>
    <div id="submenu-database" class="submenu">
      <button id="tab-cloud-db" class="submenu-item" data-i18n="cloudDatabaseSettings">Cloud Database</button>
      <button id="tab-webdav" class="submenu-item" data-i18n="webdavSettings">WebDav</button>
      <button id="tab-word-operations" class="submenu-item" data-i18n="wordOperations">单词库操作</button>
      <button id="tab-import" class="submenu-item" data-i18n="importWords">导入已知单词</button>
      <button id="tab-backup" class="submenu-item" data-i18n="backup">备份/还原</button>
    </div>


   <!-- API设置菜单项及子菜单 -->
    <button class="menu-item" id="menu-api">
      <span data-i18n="apiConfig">API 配置</span>
      <span class="arrow">▶</span>
    </button>
    <div class="submenu" id="submenu-api">
      <button id="tab-api-basic" data-i18n="apiBasic">基本设置</button>

      <button id="tab-api-word-explanation" data-i18n="apiWordExplanation">单词解释</button>
      <button id="tab-api-word-explanation-2" data-i18n="apiWordExplanation2">第二个单词解释</button>
      <button id="tab-api-language-detection" data-i18n="apiLanguageDetection">语言检测</button>
      <button id="tab-api-tag-analysis" data-i18n="apiTagAnalysis">词性标签</button>
      <button id="tab-api-sentence-translation" data-i18n="apiSentenceTranslation">例句翻译</button>
      <button id="tab-api-analysis" data-i18n="apiAnalysis">句子解析</button>
      <button id="tab-api-sidebar" data-i18n="apiSidebar">侧边栏解析</button>
      <button id="tab-api-youtube-caption" data-i18n="apiYoutubeCaption">YouTube字幕处理</button>
    </div>







    <!-- 修改：单词列表改为可折叠菜单 -->
    <button id="menu-wordlist" class="menu-item">
      <span data-i18n="wordList">单词列表</span>
      <span class="arrow">▶</span>
    </button>
    <div id="submenu-wordlist" class="submenu">
      <button id="tab-cloud-wordlist" class="submenu-item" data-i18n="cloudWordList">云数据库列表</button>
      <button id="tab-table" class="submenu-item" data-i18n="knownWords">本地 - 已知单词</button>
      <button id="tab-word-stats" class="submenu-item" data-i18n="wordStats">学习统计</button>
    </div>



 



      <!-- 将TTS菜单修改为带子菜单的形式 -->
      <button class="menu-item" id="menu-tts">
        <span data-i18n="ttsConfig">TTS 配置</span>
        <span class="arrow">▶</span>
      </button>

      <div class="submenu" id="submenu-tts">
        <button id="tab-tts-basic" data-i18n="ttsBasic">基本设置</button>
        <button id="tab-tts-local" data-i18n="ttsLocal">本地TTS</button>
        <button id="tab-tts-edge" data-i18n="ttsEdge">Edge TTS</button>
        <button id="tab-tts-minimaxi" data-i18n="ttsMinimaxi">Minimaxi TTS</button>
        <button id="tab-tts-custom" data-i18n="ttsCustom">自定义URL</button>
      </div>

    <!-- 新增：弹窗背景设置菜单 -->
    <button id="menu-tooltip-bg" class="menu-item">
      <span data-i18n="tooltipSettings">弹窗设置</span>
      <span class="arrow">▶</span>
    </button>

    <div class="submenu" id="submenu-tooltip-bg">
      <button id="tab-tooltip-bg-settings" data-i18n="tooltipThemeSettings">背景设置</button>
      <button id="tab-custom-capsules" data-i18n="customCapsules">自定义胶囊</button>
      <button id="tab-known-sentence-animation" data-i18n="knownSentenceAnimation">已知句子动效</button>
    </div>


    <!-- 新增：订阅管理菜单项 -->
    <button id="menu-subscription" class="menu-item" >
      <span data-i18n="subscriptionManagement">第三方登录</span>
      <span class="arrow">▶</span>
    </button> 

    <div id="submenu-subscription" class="submenu">
      <!-- <button id="tab-subscription-kuma" class="submenu-item" data-i18n="kumaAccount">Kuma账号(建设中)</button> -->
      <button id="tab-subscription-ohmygpt" class="submenu-item" data-i18n="ohmygptAccount">OhMyGPT AI Platform (Stripe)</button>
      <!-- 废弃隐藏 -->
      <button id="tab-subscription-afdian" class="submenu-item" data-i18n="afdianAccount" style="display: none;">爱发电</button>
    </div>


    <!-- EPUB 文本修复菜单项及子菜单 -->
    <button class="menu-item" id="menu-epub">
      <span data-i18n="epubTextFix">EPUB 文本修复</span>
      <span class="arrow">▶</span>
    </button>
    <div class="submenu" id="submenu-epub">
      <button id="tab-epub" data-i18n="epubSplitter">EPUB 拆分工具</button>
      <button id="tab-epub-telegraph" data-i18n="epubToTelegraphName">EPUB 转 Telegra.ph</button>
      <button id="tab-epub-roman-clean" data-i18n="epubRomanCleanName">EPUB 罗马注音清理</button>
    </div>

    <button id="open-popup" data-i18n="openPopup">打开弹窗</button>
    <!-- 新增：关于按钮 -->
    <button id="tab-about" data-i18n="about">关于</button>

  </div>

  <div class="main-content">



 <!-- 新增 Panel：云端数据库设置 -->
 <div id="panel-cloud-db" class="hidden">
      <h2 data-i18n="cloudDatabaseSettings">Cloud Database Settings</h2>

      <!-- 云端数据库状态 -->
      <div id="cloudDbStatus" style="position: sticky; height: 20px; top: 0; left: 0; z-index: 1000; background-color: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-radius: 8px; padding: 12px; margin: 0 0 15px 0; border: 1px solid rgba(0, 0, 0, 0.1); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; max-width: 100%; font-size: 14px; line-height: 1.4; word-wrap: break-word; display: none;">Automatic Notification</div>

      <!-- 捐赠 -->
      <div class="settings-section" style="margin-bottom: 20px;">
        <h3 data-i18n="donationTitle">捐赠</h3>

        <!-- 捐赠按钮 -->
        <div class="donation-button-container">
          <button class="creepy-btn" id="donationBtn" type="button">
            <span class="creepy-btn__eyes">
              <span class="creepy-btn__eye">
                <span class="creepy-btn__pupil"></span>
              </span>
              <span class="creepy-btn__eye">
                <span class="creepy-btn__pupil"></span>
              </span>
            </span>
            <span class="creepy-btn__cover" data-i18n="donateButton">爱发电(afdian)</span>
          </button>

          <!-- WeChat 按钮和二维码 -->
          <div class="wechat-donation-wrapper">
            <button class="creepy-btn wechat-btn" id="wechatBtn" type="button">
              <span class="creepy-btn__eyes">
                <span class="creepy-btn__eye">
                  <span class="creepy-btn__pupil"></span>
                </span>
                <span class="creepy-btn__eye">
                  <span class="creepy-btn__pupil"></span>
                </span>
              </span>
              <span class="creepy-btn__cover">WeChat 赞赏</span>
            </button>

            <!-- 二维码显示容器 -->
            <div class="qrcode-container" id="wechatQrcode">
              <button class="qrcode-close" id="closeQrcode" aria-label="关闭">×</button>
              <img src="./images/wechat_belohnungs.JPG" alt="WeChat 赞赏二维码" class="qrcode-image">
              <p class="qrcode-hint">微信扫码赞赏</p>
            </div>
          </div>
        </div>

        <!-- 捐赠说明 -->
        <div class="multilingual-note">
          <div class="note-content" data-i18n="donationNote1">
            Lingkuma完全开源免费，软件维护不易，如果您感觉该软件对你有帮助，欢迎通过<a href="https://afdian.com/a/lingkuma" target="_blank">爱发电</a>，或微信扫码赞助。
            捐赠后可使用官方公益单词实时云同步，多设备无缝使用。（插件配置因内涵API等敏感信息，目前仅支持用户自己通过Webdav进行多设备同步）；
          </div>
          <div class="note-content" data-i18n="donationNote2">
            您仍可通过以下方式免费进行同步
            1. 通过官方Docker在本地或服务器自建同步服务；
            2. 访问【公益服务器列表】使用网友提供的服务器；
            3. 通过【坚果云 Webdav】进行免费多设备同步，但非实时，多设备必须手动上传和下载。
          </div>
          <div class="note-content" data-i18n="donationNote3">
            如果使用中遇到困难，可以查阅<a href="https://docs.lingkuma.org/">使用说明</a>、观看我的视频，也欢迎加入社群。
          </div>
          <div class="note-content" data-i18n="donationNote4">
            感谢使用Lingkuma，希望能够帮助您更顺畅的学习。
          </div>
        </div>
      </div>

      <!-- 账号管理 -->
      <div class="settings-section" style="margin-bottom: 20px;">
        <h3 data-i18n="cloudAccountManagement">Account Management</h3>

        <!-- 爱发电OAuth登录（仅在非自建模式下显示） -->
        <div id="cloudAfdianOAuthSection" style="display: none;">
          <div class="oauth-section" style="margin-bottom: 20px;">
            <button id="cloudAfdianLoginBtn" class="btn-oauth" style="width: 100%; padding: 14px; background: white; color: #333; border: 1px solid #ddd; border-radius: 8px; font-size: 15px; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; transition: all 0.3s;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="color: #ff6b6b;">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
              </svg>
              <span data-i18n="cloudAfdianLoginBtn">(login by afdian)使用爱发电账号登录</span>
            </button>
          </div>
        </div>

        <!-- 登录状态显示 -->
        <div id="cloudLoginStatus" style="display: none;">
          <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid var(--border-color);">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="var(--primary-color)">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
            <div>
              <strong data-i18n="cloudLoggedInAs">Logged in as:</strong> <span id="cloudUsername"></span>
            </div>
          </div>
          <div style="display: grid; grid-template-columns: auto 1fr; gap: 8px 16px; font-size: 14px;">
            <div style="display: flex; align-items: center; gap: 8px;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="var(--text-secondary)">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
              <span data-i18n="cloudSubscriptionStatus">Subscription:</span>
            </div>
            <div id="cloudSubscriptionStatus"></div>
            <div style="display: flex; align-items: center; gap: 8px;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="var(--text-secondary)">
                <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
              </svg>
              <span data-i18n="cloudExpiresAt">Expires:</span>
            </div>
            <div id="cloudExpiresAt"></div>
            <div style="display: flex; align-items: center; gap: 8px;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="var(--text-secondary)">
                <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13v-2h-2c0-2.21-1.79-4-4-4zm0 10H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h13v8z"/>
              </svg>
              <span data-i18n="cloudDataServer">Data Server:</span>
            </div>
            <div id="cloudDataServer" style="word-break: break-all;"></div>
            <div style="display: flex; align-items: center; gap: 8px;" id="cloudAfdianIdRow">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="var(--text-secondary)">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 1.58-3.63 3.5-3.63 1.93 0 3.47 1.64 3.5 3.63-1.29 1.94-3.5 3.22-6 3.22z"/>
              </svg>
              <span data-i18n="cloudAfdianId">Afdian ID:</span>
            </div>
            <div id="cloudAfdianId" class="cloud-afdian-id-row"></div>
            <div style="display: flex; align-items: center; gap: 8px;" id="cloudPlanNameRow">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="var(--text-secondary)">
                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
              </svg>
              <span data-i18n="cloudPlanName">Plan:</span>
            </div>
            <div id="cloudPlanName" class="cloud-plan-name-row"></div>
            <div style="display: flex; align-items: center; gap: 8px;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="var(--success-color)">
                <path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"/>
              </svg>
              <span data-i18n="cloudStorage">Storage:</span>
            </div>
            <div id="cloudStorage"></div>
          </div>
        </div>

        <!-- 登录表单（仅在自建模式下显示） -->
        <div id="cloudLoginForm">
          <div class="setting-item" style="margin-bottom: 10px;">
            <label for="cloudLoginUsername" style="display: block; margin-bottom: 5px;" data-i18n="cloudUsernameLabel">Username:</label>
            <input type="text" id="cloudLoginUsername" placeholder="Username" style="width: 100%; padding: 8px;">
          </div>

          <div class="setting-item" style="margin-bottom: 10px;">
            <label for="cloudLoginPassword" style="display: block; margin-bottom: 5px;" data-i18n="cloudPasswordLabel">Password:</label>
            <input type="password" id="cloudLoginPassword" placeholder="Password" style="width: 100%; padding: 8px;">
          </div>

          <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <button id="cloudLoginBtn" data-i18n="cloudLoginBtn">Login</button>
            <button id="cloudRegisterBtn" data-i18n="cloudRegisterBtn">Register</button>
          </div>
        </div>

        <!-- 注册表单（默认隐藏，仅在自建模式下显示） -->
        <div id="cloudRegisterForm" style="display: none;">
          <div class="setting-item" style="margin-bottom: 10px;">
            <label for="cloudRegUsername" style="display: block; margin-bottom: 5px;" data-i18n="cloudUsernameLabel">Username:</label>
            <input type="text" id="cloudRegUsername" placeholder="Username" style="width: 100%; padding: 8px;">
          </div>

          <div class="setting-item" style="margin-bottom: 10px;">
            <label for="cloudRegEmail" style="display: block; margin-bottom: 5px;" data-i18n="cloudEmailLabel">Email:</label>
            <input type="email" id="cloudRegEmail" placeholder="Email" style="width: 100%; padding: 8px;">
          </div>

          <div class="setting-item" style="margin-bottom: 10px;">
            <label for="cloudRegPassword" style="display: block; margin-bottom: 5px;" data-i18n="cloudPasswordLabel">Password:</label>
            <input type="password" id="cloudRegPassword" placeholder="Password (min 6 characters)" style="width: 100%; padding: 8px;">
          </div>

          <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <button id="cloudRegisterSubmitBtn" data-i18n="cloudRegisterSubmitBtn">Create Account</button>
            <button id="cloudRegisterCancelBtn" data-i18n="cloudCancelBtn">Cancel</button>
          </div>
        </div>

        <!-- 已登录操作 -->
        <div id="cloudLoggedInActions" style="display: none;">
          <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <button id="cloudLogoutBtn" data-i18n="cloudLogoutBtn">Logout</button>
            <button id="cloudRefreshInfoBtn" data-i18n="cloudRefreshInfoBtn">Refresh Info</button>
            <button id="cloudRefreshAfdianBtn" data-i18n="cloudRefreshAfdianBtn" style="background-color: var(--success-color);">Refresh Afdian Status</button>
          </div>
        </div>
      </div>

      <!-- 服务器配置 -->
      <div class="settings-section" style="margin-bottom: 20px;">
        <h3 data-i18n="cloudServerConfig">Server Configuration</h3>

        <div class="setting-item" style="margin-bottom: 10px;">
          <label style="display: flex; align-items: center; cursor: pointer;">
            <input type="checkbox" id="cloudDbEnabled" data-auto-save="true" data-storage-key="cloudDbEnabled" data-storage-area="cloudConfig" style="margin-right: 8px;">
            <span data-i18n="cloudDbEnabledLabel">Enable Cloud Database</span>
          </label>
        </div>

        <div class="setting-item" style="margin-bottom: 10px;">
          <label style="display: flex; align-items: center; cursor: pointer;">
            <input type="checkbox" id="cloudDualWrite" data-auto-save="true" data-storage-key="cloudDualWrite" data-storage-area="cloudConfig" checked style="margin-right: 8px;">
            <span data-i18n="cloudDualWriteLabel">Enable Dual Write (Write to both local and cloud)</span>
          </label>
        </div>

        <!-- 高级模式切换 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <label style="display: flex; align-items: center; cursor: pointer;">
            <input type="checkbox" id="cloudSelfHosted" data-auto-save="true" data-storage-key="selfHosted" data-storage-area="cloudConfig" style="margin-right: 8px;">
            <span data-i18n="cloudSelfHostedLabel">Self-hosted Server (Advanced)</span>
          </label>
          <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px; margin-left: 28px;" data-i18n="cloudSelfHostedHint">Enable this if you are running your own server. Otherwise, leave it off to use the official cloud service.</p>
        </div>

        <!-- 自建服务器模式：显示服务器URL配置 -->
        <div id="cloudSelfHostedConfig" style="display: none;">
          <div class="setting-item" style="margin-bottom: 10px;">
            <label for="cloudServerUrl" style="display: block; margin-bottom: 5px;" data-i18n="cloudServerUrlLabel">Server URL:</label>
            <input type="text" id="cloudServerUrl" data-auto-save="true" data-storage-key="serverURL" data-storage-area="cloudConfig" placeholder="http://localhost:3000" style="width: 100%; padding: 8px;">
            <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
            <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">Your self-hosted server URL (same for auth and data).</p>
          </div>
        </div>
      </div>

      <!-- 数据迁移 -->
      <div class="settings-section" style="margin-bottom: 20px;">
        <h3 data-i18n="cloudDataMigration">Data Migration</h3>

        <div style="display: flex; flex-direction: column; gap: 10px;">
          <button id="cloudMigrateLocalToCloud" data-i18n="cloudMigrateLocalToCloudBtn">📤 Upload Local Database to Cloud (Merge)</button>
          <button id="cloudMigrateLocalToCloudReplace" data-i18n="cloudMigrateLocalToCloudReplaceBtn" style="background-color: var(--warning-color);">⚠️ Upload Local Database to Cloud (Replace)</button>
          <button id="cloudMigrateCloudToLocal" data-i18n="cloudMigrateCloudToLocalBtn">📥 Download Cloud Database to Local (Merge)</button>
          <button id="cloudMigrateCloudToLocalReplace" data-i18n="cloudMigrateCloudToLocalReplaceBtn" style="background-color: var(--danger-color);">⚠️ Download Cloud Database to Local (Replace)</button>
        </div>

        <div class="multilingual-note" style="margin-top: 15px;">
          <div class="note-content">
            <span class="lang-tag lang-en">EN</span>
            <span>
              <br><strong>Merge Mode:</strong> Combines local and cloud data. Existing words will be updated with newer information.
              <br><strong>Replace Mode:</strong> Completely overwrites the destination database. Use with caution!
              <br><strong>Dual Write:</strong> When enabled, all changes are written to both local and cloud databases simultaneously.
            </span>
          </div>
          <div class="note-content">
            <span class="lang-tag lang-zh">中</span>
            <span>
              <br><strong>合并模式：</strong>合并本地和云端数据。已存在的单词会用更新的信息覆盖。
              <br><strong>替换模式：</strong>完全覆盖目标数据库。请谨慎使用！
              <br><strong>双写模式：</strong>启用后，所有更改会同时写入本地和云端数据库。
            </span>
          </div>
        </div>
      </div>

      <!-- 服务器健康检查 -->
      <div class="settings-section" style="margin-bottom: 20px;">
        <h3 data-i18n="cloudServerHealth">Server Health</h3>
        <button id="cloudHealthCheckBtn" data-i18n="cloudHealthCheckBtn">🏥 Check Server Status</button>
        <div id="cloudHealthStatus" style="margin-top: 10px; padding: 10px; border-radius: 8px; background-color: var(--highlight-color); display: none;"></div>
      </div>
 </div>

 <!-- 新增 PanelX：WebDAV 设置 -->
 <div id="panel-webdav" class="hidden">
      <h2 data-i18n="webdavSettings">WebDAV Settings</h2>

 
      <div class="backup-section">

        <!-- WebDAV状态悬浮提醒 -->
        <div id="webdavStatus" style="position: sticky;    height: 20px; top: 0; left: 0; z-index: 1000; background-color: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-radius: 8px; padding: 12px; margin: 0 0 15px 0; border: 1px solid rgba(0, 0, 0, 0.1); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; max-width: 100%; font-size: 14px; line-height: 1.4; word-wrap: break-word; display: none;">  Automatic Notification </div>

          <h1 data-i18n="webdavActions">WebDAV Sync & Backup</h1>
          <div style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 10px;">

              <!-- Sync and Backup Buttons -->
              <h2 data-i18n="webdavCredentials">单词同步设置;words database sync</h2>
              <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                <button id="webdavUploadSync" data-i18n="webdavUploadSyncBtn">1️⃣ Device A Upload Sync database (Overwrite Cloud) ；比如电脑上传</button>
                <button id="webdavDownloadMerge" data-i18n="webdavDownloadMergeBtn">2️⃣ Device B Download Sync database (Merge Locally) ；这边手机下载合并</button>
                <button id="webdavDownloadReplace" data-i18n="webdavDownloadReplaceBtn">⚠️ Device B Download Sync database (Replace Locally) ；完全覆盖本地</button>
                <button id="webdavUploadBackup" data-i18n="webdavUploadBackupBtn">♻️ Just Upload backup File, muilty times ；仅备份，可多次</button>
              </div>

              <h2 data-i18n="multiDeviceSettings">多设备配置文件同步 Multi-Device Settings Sync</h2>
              <h3>💻 Windows</h3>
              <!-- Settings Buttons -->
              <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                <button id="webdavSettingsSync" data-i18n="webdavSettingsSyncBtn">1️⃣ Device A Upload Syncd Settings config</button>
                <button id="webdavSettingsDownload" data-i18n="webdavSettingsDownloadBtn">2️⃣ Device B Apply Syncd Settings config</button>
                <button id="webdavSettingsUpload" data-i18n="webdavSettingsUploadBtn">♻️ Upload Settings config, muilty times</button>
              </div>

              <!-- 新增：多设备配置文件同步 -->
              
              <!-- iPhone 设备配置 2-->
              <h3>📱 iPhone</h3>
              <div style="display: flex; flex-wrap: wrap; gap: 10px; ">
                <button id="device-iphone-upload" data-i18n="deviceIphoneUpload">📤 Upload iPhone Settings</button>
                <button id="device-iphone-merge" data-i18n="deviceIphoneMerge">📥 Merge iPhone Settings</button>
                <button id="device-iphone-multiupload" data-i18n="deviceIphoneMultiUpload">♻️ Backup iPhone Settings</button>
              </div>

              <!-- Laptop 设备配置 -->
              <h3>💻 Laptop</h3>
              <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                <button id="device-laptop-upload" data-i18n="deviceLaptopUpload">📤 Upload Laptop Settings</button>
                <button id="device-laptop-merge" data-i18n="deviceLaptopMerge">📥 Merge Laptop Settings</button>
                <button id="device-laptop-multiupload" data-i18n="deviceLaptopMultiUpload">♻️ Backup Laptop Settings</button>
              </div>

              <!-- Android 设备配置 -->
              <h3>🤖 Android</h3>
              <div style="display: flex; flex-wrap: wrap; gap: 10px; ">
                <button id="device-android-upload" data-i18n="deviceAndroidUpload">📤 Upload Android Settings</button>
                <button id="device-android-merge" data-i18n="deviceAndroidMerge">📥 Merge Android Settings</button>
                <button id="device-android-multiupload" data-i18n="deviceAndroidMultiUpload">♻️ Backup Android Settings</button>
              </div>

              <!-- Mac 设备配置 -->
              <h3>🍎 Mac</h3>
              <div style="display: flex; flex-wrap: wrap; gap: 10px; ">
                <button id="device-mac-upload" data-i18n="deviceMacUpload">📤 Upload Mac Settings</button>
                <button id="device-mac-merge" data-i18n="deviceMacMerge">📥 Merge Mac Settings</button>
                <button id="device-mac-multiupload" data-i18n="deviceMacMultiUpload">♻️ Backup Mac Settings</button>
              </div>

              <!-- PC 设备配置2 -->
              <h3>🎮 PC</h3>
              <div style="display: flex; flex-wrap: wrap; gap: 10px; ">
                <button id="device-pc-upload" data-i18n="devicePcUpload">📤 Upload PC Settings</button>
                <button id="device-pc-merge" data-i18n="devicePcMerge">📥 Merge PC Settings</button>
                <button id="device-pc-multiupload" data-i18n="devicePcMultiUpload">♻️ Backup PC Settings</button>
              </div>
            </div>
      </div>

      <div class="settings-section" style="margin-bottom: 20px;">
        <h3 data-i18n="webdavCredentials">WebDAV Credentials</h3>

          <div class="setting-item" style="margin-bottom: 10px;">
              <label for="webdavUrl" style="display: block; margin-bottom: 5px;" data-i18n="webdavUrlLabel">URL:</label>
              <input type="text" id="webdavUrl" data-auto-save="true" data-storage-key="webdavUrl" data-storage-area="syncConfig" placeholder="https://example.com/dav/" style="width: 100%; padding: 8px;">
              <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          </div>

          <div class="setting-item" style="margin-bottom: 10px;">
              <label for="webdavUsername" style="display: block; margin-bottom: 5px;" data-i18n="webdavUsernameLabel">Account:</label>
              <input type="text" id="webdavUsername" data-auto-save="true" data-storage-key="webdavUsername" data-storage-area="syncConfig" placeholder="用户名" style="width: 100%; padding: 8px;">
              <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          </div>
          <div class="setting-item" style="margin-bottom: 10px;">
              <label for="webdavPassword" style="display: block; margin-bottom: 5px;" data-i18n="webdavPasswordLabel">Password:</label>
              <input type="password" id="webdavPassword" data-auto-save="true" data-storage-key="webdavPassword" data-storage-area="syncConfig" placeholder="密码" style="width: 100%; padding: 8px;">
              <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          </div>
      </div>

 <!-- 添加多语言提示框 -->
 <div class="multilingual-note">
  <div class="note-title" data-i18n="noteImportant">重要提示</div>

  <div class="note-content">
    <span class="lang-tag lang-en">EN</span>
    <span>
      <br>Jianguoyun: url : <a href="https://www.jianguoyun.com/#/" target="_blank" rel="noopener noreferrer">https://www.jianguoyun.com/#/</a>
      <br>Jianguoyun WebDAV Setup Tutorial: <a href="https://help.jianguoyun.com/?p=2064" target="_blank" rel="noopener noreferrer">https://help.jianguoyun.com/?p=2064</a>
      <br><a href="https://dav.jianguoyun.com/dav/" target="_blank" rel="noopener noreferrer">https://dav.jianguoyun.com/dav/</a>
      <br>
      <br>1️⃣ Upload Sync File (Overwrite Cloud): This single file holds your progress. Uploading from any device overwrites this cloud file with the device's current **entire** progress.
      <br>2️⃣ Download Sync File (Merge Locally): Downloads the sync file from the cloud and **merges** it with your local data. Cloud records for a word overwrite the local record for the same word. New words from the cloud are added. Unique local words are kept.
      <br>♻️ Upload Dated Backup File (to Cloud): Creates a new backup file in the cloud named with the current date/time. Allows multiple backups.
      <br>
      <br><strong>Sync Mechanism:</strong>
      <br>- <strong>Upload Progress:</strong> Overwrites the cloud with the <strong>entire</strong> learning progress from the current device. Ensure local progress is complete before uploading.
      <br>- <strong>Download Progress:</strong> Fetches the learning progress from the cloud and <strong>merges</strong> it with the local progress on the current device. Merge rule: Cloud records overwrite local records for the same word; new words from the cloud are added; unique local records are retained.
      <br>
      <br><strong>Recommended Sync Flow (Keeping Progress Intact):</strong>
      <br>1. After studying on Device A (e.g., PC) -> <strong>Upload Progress</strong>.
      <br>2. Before studying on Device B (e.g., phone) -> First <strong>Download Progress</strong> (merges A's progress into B) -> Study on Device B -> <strong>Upload Progress</strong> (uploads the complete A+B progress).
      <br>3. Before studying again on Device A -> First <strong>Download Progress</strong> (merges B's new progress into A).
      <br>Following the "Download & Merge -> Study -> Upload" pattern ensures your progress remains complete across devices.
      <br>
      <br><strong>Alternative Flow: PC Study, Independent Phone Study, Sync Later</strong>
      <br>Even if you don't follow the recommended flow, you can merge progress anytime:
      <br>1. Study on PC -> <strong>Upload Progress</strong> (Cloud = PC progress A).
      <br>2. Study independently on Phone (<strong>without downloading</strong> first) (Phone local = Phone progress B).
      <br>3. <strong>Subsequent Merge Steps:</strong>
      <br>&nbsp;&nbsp;a. On the phone, click <strong>Download Progress</strong>. The cloud's PC progress (A) is merged into the phone. (Phone local = A + B).
      <br>&nbsp;&nbsp;b. (Important) On the phone, click <strong>Upload Progress</strong>. The merged, complete progress (A + B) is saved to the cloud. (Cloud = A + B).
      <br>&nbsp;&nbsp;c. Back on the PC, click <strong>Download Progress</strong>. The cloud's (A + B) progress is merged into the PC. (PC local = A + B).
      <br>After these steps, both devices are fully synchronized.
      <br>
      <br><strong>Core Operation:</strong> On the device you just finished studying on, first [Download Progress] (to merge any changes from the cloud), then after your study session, [Upload Progress] (to save the complete, merged progress back to the cloud). This ensures the cloud always has the most up-to-date and complete record. Other devices then only need to [Download Progress] to get synchronized.
      <br>
      <br><strong>Multi-Device Settings Sync:</strong>
      <br>The new multi-device settings feature allows you to maintain separate configuration profiles for different devices (PC, iPhone, Android, Laptop, Mac). Each device has its own directory structure:
      <br>- <strong>📤 Upload Settings:</strong> Saves current device settings to /Lingkuma/Settings[1-5]/[device]_settings.json (overwrites cloud)
      <br>- <strong>📥 Merge Settings:</strong> Downloads and applies settings from the cloud to current device (merges with local settings)
      <br>- <strong>♻️ Backup Settings:</strong> Creates timestamped backup in /Lingkuma/SettingsBackup[1-5]/ (multiple backups allowed)
      <br>
      <br><strong>Directory Structure:</strong>
      <br>PC: Settings1/ & SettingsBackup1/
      <br>iPhone: Settings2/ & SettingsBackup2/
      <br>Android: Settings3/ & SettingsBackup3/
      <br>Laptop: Settings4/ & SettingsBackup4/
      <br>Mac: Settings5/ & SettingsBackup5/
      <br>
    </span>
  </div>
  <div class="note-content">
    <span class="lang-tag lang-zh">中</span>
    <span>
      <br>坚果云：  url : <a href="https://www.jianguoyun.com/#/" target="_blank" rel="noopener noreferrer">https://www.jianguoyun.com/#/</a>
      <br>坚果云Webdav生成教程： <a href="https://help.jianguoyun.com/?p=2064" target="_blank" rel="noopener noreferrer">https://help.jianguoyun.com/?p=2064</a>
      <br>1️⃣上传同步文件 (覆盖云端)：这个只有一份，任何设备上传都会覆盖这一个。
      <br>2️⃣下载合并文件 (合并本地)：这个会下载上面的这一份，然后同步到本地。如果本地没有某单词，那么加添加进来。如果本地有某单词 ，那么会覆盖掉。
      <br>♻️上传日期备份文件 (到云端)：每次都上传一份根据当前时间命名的备份，可多次备份。
      <br>
      <br><strong>同步机制：</strong>
      <br>- <strong>上传进度：</strong> 将当前设备的 <strong>全部</strong> 学习进度覆盖到云端。请确保上传前本地进度是完整的。
      <br>- <strong>下载进度：</strong> 获取云端的学习进度，并将其与当前设备的本地进度进行 <strong>合并</strong>。合并规则：云端的记录会覆盖本地的同名单词记录，并添加本地没有的新记录。本地独有的记录会保留。
      <br>
      <br><strong>推荐同步流程（保持进度完整）：</strong>
      <br>1. 在设备 A（如电脑）学习后 -> <strong>上传进度</strong>。
      <br>2. 在设备 B（如手机）学习前 -> 先 <strong>下载进度</strong> (合并 A 的进度到 B) -> B 设备学习 -> <strong>上传进度</strong> (上传 A+B 的完整进度)。
      <br>3. 回到设备 A 学习前 -> 先 <strong>下载进度</strong> (合并 B 的新进度到 A)。
      <br>遵循"先下载合并，再学习，后上传"的模式可以确保进度始终完整。
      <br>
      <br><strong>懒人同步流程：电脑看完，手机独立看，后续再同步</strong>
      <br>即使您没有遵循推荐流程，也可以随时合并进度：
      <br>1. 电脑学习 -> <strong>不上传进度</strong> (此时云端 = 非常老的电脑学习记录)。
      <br>2. 手机 <strong>不下载</strong>，直接独立学习 (此时手机本地 = 手机进度 B)。
      <br>3. <strong>后续合并步骤：</strong>
      <br>4. 电脑上传进度 (此时云端 = 非常老的电脑学习记录)。
      <br>&nbsp;&nbsp;a. 在手机上点击 <strong>下载进度</strong>。云端的电脑进度 A 会合并到手机。(手机本地 = A + B)。
      <br>&nbsp;&nbsp;b. （重要）在手机上点击 <strong>上传进度</strong>，将合并后的完整进度 (A + B) 保存到云端。(此时云端 = A + B)。
      <br>&nbsp;&nbsp;c. 回到电脑，点击 <strong>下载进度</strong>。云端的 (A + B) 进度会合并到电脑。(电脑本地 = A + B)。
      <br>完成以上步骤后，两边进度就完全同步了。
      <br>
      <br><strong>核心操作：</strong> 在需要同步的设备上，先【下载进度】（合并云端记录），学习完毕后，再【上传进度】（用本地完整记录覆盖云端），即可让云端保持最新最全的记录。然后其他设备只需要【下载进度】即可同步。
      <br>
      <br><strong>多设备配置文件同步：</strong>
      <br>新增的多设备配置功能允许您为不同设备（PC、iPhone、Android、Laptop、Mac）维护独立的配置文件。每个设备都有自己的目录结构：
      <br>- <strong>📤 上传配置：</strong> 将当前设备配置保存到 /Lingkuma/Settings[1-5]/[设备]_settings.json（覆盖云端）
      <br>- <strong>📥 合并配置：</strong> 从云端下载配置并应用到当前设备（与本地配置合并）
      <br>- <strong>♻️ 备份配置：</strong> 在 /Lingkuma/SettingsBackup[1-5]/ 创建带时间戳的备份（允许多次备份）
      <br>
      <br><strong>目录结构：</strong>
      <br>PC: Settings1/ & SettingsBackup1/
      <br>iPhone: Settings2/ & SettingsBackup2/
      <br>Android: Settings3/ & SettingsBackup3/
      <br>Laptop: Settings4/ & SettingsBackup4/
      <br>Mac: Settings5/ & SettingsBackup5/
      <br>
      <br><strong>使用场景：</strong>
      <br>1. 不同设备有不同的API配置需求（如手机使用不同的TTS设置）
      <br>2. 为每个设备保持独立的配置备份
      <br>3. 在设备间快速同步特定的配置设置
      <br>

    </span>
  </div>
</div>




</div>











    <!-- Panel：云数据库列表 -->
    <div id="panel-cloud-wordlist" class="hidden">
      <h1 data-i18n="cloudWordList">云数据库列表</h1>
      <div class="settings-section">
        <p style="margin-bottom: 20px; color: var(--text-secondary);" data-i18n="cloudWordListDesc">访问您的云数据库单词列表</p>

        <div style="display: flex; flex-direction: column; gap: 15px;">
          <div class="setting-item" style="padding: 20px; border: 1px solid var(--border-color); border-radius: 10px; background-color: var(--card-background);">
            <h3 style="margin: 0 0 10px 0; color: var(--primary-color);" data-i18n="officialServer">🌐 官方服务器</h3>
            <a href="https://dashboard.lingkuma.org/dashboard/" target="_blank" style="display: block; padding: 12px; background-color: var(--primary-color); color: white; text-align: center; border-radius: 8px; text-decoration: none; font-weight: 500;">
              https://dashboard.lingkuma.org/dashboard/
            </a>
          </div>

          <div class="setting-item" style="padding: 20px; border: 1px solid var(--border-color); border-radius: 10px; background-color: var(--card-background);">
            <h3 style="margin: 0 0 10px 0; color: var(--secondary-color);" data-i18n="customServer">🏠 自定义服务器</h3>
            <div id="customServerLinkContainer">
              <p style="color: var(--text-secondary); margin-bottom: 10px;" id="customServerStatus" data-i18n="customServerNotConfigured">请先在Cloud Database设置中配置自定义服务器</p>
              <a id="customServerLink" href="#" target="_blank" style="display: none; padding: 12px; background-color: var(--secondary-color); color: white; text-align: center; border-radius: 8px; text-decoration: none; font-weight: 500;" data-i18n="accessCustomServer">
                访问自定义服务器
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>











    <!-- Panel1：单词列表 -->
    <div id="panel-table" class="hidden">
      <h1 data-i18n="knownWords">本地 - 已知单词</h1>
      <div class="table-container">
        <div class="wordlist-section">
          <ul id="wordList" class="word-list"></ul>
          <div class="pagination">
            <button id="prevBtn" data-i18n="prevPage">上一页</button>
            <span id="pageInfo">第 1 页，共 1 页</span>
            <button id="nextBtn" data-i18n="nextBtn">下一页</button>
          </div>
        </div>
        <div class="filter-section sticky-filter">
          <h3 data-i18n="filterOptions">Filter options</h3>
          <div class="filter-item">
            <label for="languageFilter" data-i18n="language" data-i18n-suffix="：">语言：</label>
            <select id="languageFilter">
              <option value="all" data-i18n="all">全部</option>
              <option value="zh" data-i18n="zh">中文</option>
              <option value="en" data-i18n="en">英语</option>
              <option value="de" data-i18n="de">德语</option>
              <option value="fr" data-i18n="fr">法语</option>
              <option value="es" data-i18n="es">西班牙语</option>
              <option value="it" data-i18n="it">意大利语</option>
              <option value="ja" data-i18n="ja">日语</option>
              <option value="ko" data-i18n="ko">韩语</option>
              <option value="ru" data-i18n="ru">俄语</option>
            </select>
          </div>
          <div class="filter-item">
            <label data-i18n="status" data-i18n-suffix="：">状态：</label>
            <div style="margin-top: 6px; display: grid; grid-template-columns: 1fr 1fr; gap: 4px;">
              <label style="display: flex; align-items: center; cursor: pointer; padding: 4px; grid-column: 1 / -1;">
                <input type="checkbox" id="statusFilter_all" value="all" style="margin-right: 8px;">
                <span data-i18n="all">全部</span>
              </label>
              <label style="display: flex; align-items: center; cursor: pointer; padding: 4px;">
                <input type="checkbox" id="statusFilter_0" value="0" style="margin-right: 8px;">
                <span data-i18n="known">已知 (0)</span>
              </label>
              <label style="display: flex; align-items: center; cursor: pointer; padding: 4px;">
                <input type="checkbox" id="statusFilter_1" value="1" style="margin-right: 8px;">
                <span data-i18n="learning">学习中 (1)</span>
              </label>
              <label style="display: flex; align-items: center; cursor: pointer; padding: 4px;">
                <input type="checkbox" id="statusFilter_2" value="2" style="margin-right: 8px;">
                <span data-i18n="familiar">熟悉 (2)</span>
              </label>
              <label style="display: flex; align-items: center; cursor: pointer; padding: 4px;">
                <input type="checkbox" id="statusFilter_3" value="3" style="margin-right: 8px;">
                <span data-i18n="recognized">认识 (3)</span>
              </label>
              <label style="display: flex; align-items: center; cursor: pointer; padding: 4px;">
                <input type="checkbox" id="statusFilter_4" value="4" style="margin-right: 8px;">
                <span data-i18n="almostMastered">几乎掌握 (4)</span>
              </label>
              <label style="display: flex; align-items: center; cursor: pointer; padding: 4px;">
                <input type="checkbox" id="statusFilter_5" value="5" style="margin-right: 8px;">
                <span data-i18n="fullyMastered">完全掌握 (5)</span>
              </label>
            </div>
          </div>

          <!-- Date Filter Section -->
          <div class="date-filter-container" style="border: 1px solid var(--border-color); border-radius: 6px; padding: 8px; margin-bottom: 10px;">
            <div class="date-filter-warning" style="background-color: var(--warning-color); color: #000; padding: 6px; border-radius: 4px; margin-bottom: 8px; font-size: 11px; line-height: 1.3;">
              <span data-i18n="dateFilterWarning">导入的单词可能没有时间数据，筛选结果可能不准。请忽略时间数据统计已知单词。</span>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 6px; margin-bottom: 6px;">
              <div>
                <label for="startDateFilter" data-i18n="startDate" data-i18n-suffix="：" style="font-size: 12px;">开始日期：</label>
                <input type="date" id="startDateFilter" style="width: 100%; padding: 4px; font-size: 12px;">
              </div>
              <div>
                <label for="endDateFilter" data-i18n="endDate" data-i18n-suffix="：" style="font-size: 12px;">结束日期：</label>
                <input type="date" id="endDateFilter" style="width: 100%; padding: 4px; font-size: 12px;">
              </div>
            </div>
            <div style="margin-bottom: 6px;">
              <label for="pastDaysInput" data-i18n="pastDays" data-i18n-suffix="：" style="font-size: 12px;">往前天数：</label>
              <div style="display: flex; gap: 4px; margin-top: 3px;">
                <input type="number" id="pastDaysInput" min="1" value="30" placeholder="天数" style="flex: 1; padding: 4px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 12px;">
                <button id="applyPastDaysBtn" data-i18n="applyPastDays" style="padding: 4px 8px; background-color: var(--secondary-color); color: white; border: none; border-radius: 4px; cursor: pointer; white-space: nowrap; font-size: 12px;">应用</button>
              </div>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 4px; margin-bottom: 6px;">
              <button id="filterToday" data-i18n="filterToday" style="padding: 4px; font-size: 12px;">当日</button>
              <button id="filterYesterday" data-i18n="filterYesterday" style="padding: 4px; font-size: 12px;">昨日</button>
              <button id="filterNoDate" data-i18n="filterNoDate" style="padding: 4px; font-size: 12px;">无日期</button>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 4px;">
              <button id="filterThisWeek" data-i18n="filterThisWeek" style="padding: 4px; font-size: 12px;">本周</button>
              <button id="filterThisMonth" data-i18n="filterThisMonth" style="padding: 4px; font-size: 12px;">本月</button>
            </div>
          </div>
          <!-- End Date Filter Section -->

          <div class="filter-item">
            <label for="pageSizeSelector" data-i18n="itemsPerPage" data-i18n-suffix="：">每页显示：</label>
            <select id="pageSizeSelector">
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>
          <button id="filterByStatusOnlyBtn" data-i18n="filterByStatusOnly" style="width: 100%; margin-bottom: 8px; background-color: var(--success-color); color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 13px;">仅筛选单词状态</button>
          <button id="applyFilterBtn" data-i18n="applyFilter" style="padding: 8px; font-size: 13px;">应用筛选</button>
        </div>
      </div>
    </div>

    <!-- 新增：单词学习统计面板 -->
    <div id="panel-word-stats" class="hidden">
      <h1 data-i18n="wordStatsTitle">单词学习统计</h1>

      <div class="stats-container">
        <div class="chart-section">
          <div class="chart-container">
            <canvas id="wordStatsChart"></canvas>
          </div>
        </div>

        <div class="filter-section sticky-filter">
          <h3 data-i18n="filterOptions">筛选选项</h3>

          <!-- 时间范围筛选 -->
          <div class="filter-item">
            <label data-i18n="timeRange">时间范围</label>
            <div class="filter-buttons" style="display: flex; flex-wrap: wrap; gap: 5px; margin-top: 8px;">
              <button id="statsFilterToday" data-i18n="filterToday" style="flex-grow: 1;">当日</button>
              <button id="statsFilterYesterday" data-i18n="filterYesterday" style="flex-grow: 1;">昨日</button>
            </div>
            <div class="filter-buttons" style="display: flex; flex-wrap: wrap; gap: 5px; margin-top: 5px;">
              <button id="statsFilterThisWeek" data-i18n="filterThisWeek" style="flex-grow: 1;">本周</button>
              <button id="statsFilterThisMonth" data-i18n="filterThisMonth" style="flex-grow: 1;">本月</button>
            </div>
            <div class="filter-buttons" style="display: flex; flex-wrap: wrap; gap: 5px; margin-top: 5px;">
              <button id="statsFilterThisYear" data-i18n="thisYear" style="flex-grow: 1;">本年</button>
              <button id="statsFilterAllTime" data-i18n="allTime" style="flex-grow: 1;">全部时间</button>
            </div>
            <div class="filter-buttons" style="display: flex; flex-wrap: wrap; gap: 5px; margin-top: 5px;">
              <button id="statsFilterLast30Days" data-i18n="last30Days" style="flex-grow: 1;">前30天</button>
              <button id="statsFilterLast60Days" data-i18n="last60Days" style="flex-grow: 1;">前60天</button>
            </div>
            <div class="filter-buttons" style="display: flex; flex-wrap: wrap; gap: 5px; margin-top: 5px;">
              <button id="statsFilterLast90Days" data-i18n="last90Days" style="flex-grow: 1;">前90天</button>
            </div>
          </div>

          <!-- 自定义日期范围 -->
          <div class="filter-item">
            <label data-i18n="customRange">自定义范围</label>
            <div style="margin-top: 8px;">
              <label for="statsStartDate" data-i18n="startDate" data-i18n-suffix="：">开始日期：</label>
              <input type="date" id="statsStartDate" style="width: 100%;">
            </div>
            <div style="margin-top: 8px;">
              <label for="statsEndDate" data-i18n="endDate" data-i18n-suffix="：">结束日期：</label>
              <input type="date" id="statsEndDate" style="width: 100%;">
            </div>
            <button id="statsApplyRange" data-i18n="applyRange" style="width: 100%; margin-top: 8px;">应用范围</button>
          </div>

          <!-- 语言筛选 -->
          <div class="filter-item">
            <label data-i18n="language" data-i18n-suffix="：">语言：</label>
            <select id="statsLanguageFilter" style="width: 100%; margin-top: 8px;">
              <option value="all" data-i18n="all">全部</option>
              <option value="zh" data-i18n="zh">中文</option>
              <option value="en" data-i18n="en">英语</option>
              <option value="de" data-i18n="de">德语</option>
              <option value="fr" data-i18n="fr">法语</option>
              <option value="es" data-i18n="es">西班牙语</option>
              <option value="it" data-i18n="it">意大利语</option>
              <option value="ja" data-i18n="ja">日语</option>
              <option value="ko" data-i18n="ko">韩语</option>
              <option value="ru" data-i18n="ru">俄语</option>
            </select>
          </div>

          <!-- 状态筛选 -->
          <div class="filter-item">
            <label data-i18n="statusFilter">状态筛选</label>
            <div style="margin-top: 8px;">
              <div class="checkbox-item">
                <input type="checkbox" id="statsStatus1" value="1" checked>
                <label for="statsStatus1" data-i18n="learning">学习中 (1)</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="statsStatus2" value="2">
                <label for="statsStatus2" data-i18n="familiar">熟悉 (2)</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="statsStatus3" value="3">
                <label for="statsStatus3" data-i18n="recognized">认识 (3)</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="statsStatus4" value="4">
                <label for="statsStatus4" data-i18n="almostMastered">几乎掌握 (4)</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="statsStatus5" value="5">
                <label for="statsStatus5" data-i18n="fullyMastered">完全掌握 (5)</label>
              </div>
            </div>
          </div>

          <!-- 图表类型 -->
          <div class="filter-item">
            <label data-i18n="chartType">图表类型</label>
            <div class="radio-group" style="margin-top: 8px;">
              <div class="radio-item">
                <input type="radio" id="chartTypeLine" name="chartType" value="line" checked>
                <label for="chartTypeLine" data-i18n="lineChart">折线图</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="chartTypeBar" name="chartType" value="bar">
                <label for="chartTypeBar" data-i18n="barChart">柱状图</label>
              </div>
            </div>
          </div>

          <!-- 新增：统计模式选择 -->
          <div class="filter-item">
            <label for="chartModeSelector" data-i18n="statsChartMode">统计模式</label>
            <select id="chartModeSelector" style="width: 100%; margin-top: 8px;">
              <option value="modeA" data-i18n="statsModeA">按单词创建日期统计</option>
              <option value="modeB" data-i18n="statsModeB">按状态达成日期统计</option>
            </select>
          </div>

          <!-- 新增：导数选择器 -->
          <div class="filter-item">
            <label for="derivativeSelector" data-i18n="derivativeOrder">导数阶数</label>
            <select id="derivativeSelector" style="width: 100%; margin-top: 8px;">
              <option value="0" data-i18n="derivativeOrder0">原始数据 (0阶)</option>
              <option value="1" data-i18n="derivativeOrder1">一阶导数 (变化率)</option>
              <option value="2" data-i18n="derivativeOrder2">二阶导数 (加速度)</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- 新增：单词库操作面板 -->
    <div id="panel-word-operations" class="hidden">
      <h1 data-i18n="wordOperationsTitle">单词库操作</h1>

      <div class="settings-section">
        <h2 data-i18n="sentenceManagement">例句管理</h2>

        <!-- 数据库大小显示 -->
        <div style="padding: 15px; margin-bottom: 20px; border-radius: 10px; background-color: rgba(0, 122, 255, 0.1); border: 1px solid var(--primary-color);">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <span style="font-weight: 600;" data-i18n="currentDbSize">当前数据库大小：</span>
            <span id="currentDbSize" style="font-size: 18px; font-weight: bold; color: var(--primary-color);">计算中...</span>
          </div>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-weight: 600;" data-i18n="totalSentences">总例句数量：</span>
            <span id="totalSentences" style="font-size: 18px; font-weight: bold; color: var(--primary-color);">计算中...</span>
          </div>
        </div>

        <!-- 例句删除选项 -->
        <div style="margin-bottom: 20px;">
          <h3 data-i18n="sentenceDeleteOptions">例句删除选项</h3>

          <div class="radio-group" style="flex-direction: column; gap: 15px; margin-top: 15px;">
            <div class="radio-item">
              <input type="radio" id="deleteAllSentences" name="sentenceOperation" value="deleteAll" checked>
              <label for="deleteAllSentences" data-i18n="deleteAllSentences">删除所有例句</label>
            </div>

            <div class="radio-item" style="flex-direction: column; align-items: flex-start;">
              <div style="display: flex; align-items: center;">
                <input type="radio" id="keepNSentences" name="sentenceOperation" value="keepN">
                <label for="keepNSentences" data-i18n="keepNSentences">每个单词保留前 N 个例句</label>
              </div>
              <div style="margin-left: 28px; margin-top: 10px; display: flex; align-items: center; gap: 10px;">
                <label for="sentenceKeepCount" data-i18n="keepCount">保留数量：</label>
                <input type="number" id="sentenceKeepCount" min="1" max="100" value="3" style="width: 80px; padding: 8px;">
              </div>
            </div>
          </div>
        </div>

        <!-- 操作按钮 -->
        <div style="display: flex; gap: 15px; margin-top: 25px;">
          <button id="calculateDbSizeBtn" style="background-color: var(--primary-color); flex: 1;">
            <span data-i18n="refreshDbSize">刷新数据库信息</span>
          </button>
          <button id="executeSentenceOperationBtn" style="background-color: var(--danger-color); flex: 1;">
            <span data-i18n="executeSentenceOperation">执行例句删除</span>
          </button>
        </div>

        <!-- 操作结果显示 -->
        <div id="sentenceOperationResult" style="margin-top: 20px; padding: 15px; border-radius: 10px; display: none;"></div>
      </div>

      <!-- 重置词组数据库 -->
      <div class="settings-section">
        <h2 data-i18n="resetPhrasesDb">重置词组数据库</h2>

        <!-- 提示信息 -->
        <div class="multilingual-note" style="margin-bottom: 20px;">
          <div class="note-title" data-i18n="noteImportant">重要提示</div>
          <div class="note-content">
            <p data-i18n="resetPhrasesDbHint">如果你清空了单词数据库，并重新导入，你可能需要从新的数据库中，创建新的词组缓存。</p>
          </div>
        </div>

        <!-- 操作按钮 -->
        <div style="display: flex; gap: 15px; margin-top: 15px;">
          <button id="resetPhrasesDbBtn" style="background-color: var(--primary-color); flex: 1;">
            <span data-i18n="resetPhrasesDb">重置词组数据库</span>
          </button>
        </div>

        <!-- 操作结果显示 -->
        <div id="resetPhrasesResult" style="margin-top: 20px; padding: 15px; border-radius: 10px; display: none;"></div>
      </div>

      <!-- 清空本地数据库 -->
      <div class="settings-section">
        <h2 data-i18n="clearLocalDb">清空本地数据库</h2>

        <!-- 操作按钮 -->
        <div style="display: flex; gap: 15px; margin-top: 15px;">
          <button id="clearLocalDbBtn" data-i18n="webdavClearDbBtn" style="background-color: var(--danger-color); flex: 1;">清空本地数据库</button>
        </div>

        <!-- 操作结果显示 -->
        <div id="clearLocalDbResult" style="margin-top: 20px; padding: 15px; border-radius: 10px; display: none;"></div>
      </div>
    </div>

    <!-- Panel2：导入单词（保持原有导入功能不变）-->
    <div id="panel-import" class="hidden" >
      <div class="import-section">
        <h2 data-i18n="importTxt">导入txt单词</h2>
        <div>
          <input type="file" id="importFile" accept=".txt" />
        </div>
        <div class="import-options">
          <div>
            <label data-i18n="separator" data-i18n-suffix=":">分隔方式:</label>
            <div class="radio-group">
              <div class="radio-item">
                <input type="radio" id="separatorNewline" name="separator" value="newline" checked>
                <label for="separatorNewline" data-i18n="newline">换行</label>
              </div>
              <div class="radio-item">
                <input type="radio" id="separatorComma" name="separator" value="comma">
                <label for="separatorComma" data-i18n="comma">逗号</label>
              </div>
            </div>
          </div>
          <div>
            <label data-i18n="language" data-i18n-suffix=":">语言:</label>
            <select id="language">
              <option value="en" data-i18n="en">英语</option>
              <option value="de" data-i18n="de">德语</option>
              <option value="fr" data-i18n="fr">法语</option>
              <option value="es" data-i18n="es">西班牙语</option>
              <option value="it" data-i18n="it">意大利语</option>
              <option value="ja" data-i18n="ja">日语</option>
              <option value="ko" data-i18n="ko">韩语</option>
              <option value="ru" data-i18n="ru">俄语</option>
              <option value="custom" data-i18n="custom">自定义</option>
            </select>
            <!-- 新增自定义语言输入框 -->
            <div id="customLanguageInput" style="display: none; margin-top: 10px;">
              <label>自定义语言代码:</label>
              <input type="text" id="customLanguageCode" placeholder="请输入ISO 639-1语言代码" style="width: 200px;">
              <div class="hint" style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">
                请输入ISO 639-1标准的双字母语言代码，例如：en, de, fr等
              </div>
            </div>
          </div>
          <div>
            <label data-i18n="wordStatus" data-i18n-suffix=":">单词状态:</label>
            <select id="wordStatus">
              <option value="1" data-i18n="learning">学习中 (1)</option>
              <option value="2" data-i18n="familiar">熟悉 (2)</option>
              <option value="3" data-i18n="recognized">认识 (3)</option>
              <option value="4" data-i18n="almostMastered">几乎掌握 (4)</option>
              <option value="5" data-i18n="fullyMastered">完全掌握 (5)</option>
            </select>
          </div>
          <div>
            <label data-i18n="parallelBatches" data-i18n-suffix=":">并行导入批次:</label>
            <select id="batchCount">
              <option value="4">4</option>
              <option value="8">8</option>
              <option value="16" selected>16</option>
              <option value="32">32</option>
            </select>
          </div>
          <div>
            <label data-i18n="wordsPerBatch" data-i18n-suffix=":">每批词数:</label>
            <select id="batchSize">
              <option value="20">20</option>
              <option value="50">50</option>
              <option value="100" selected>100</option>
              <option value="200">200</option>
            </select>
          </div>
        </div>
        <div class="button-group">
          <button id="importBtn" data-i18n="import">导入单词</button>
          <button id="clearBtn" data-i18n="clearList">清空单词列表</button>
        </div>
        <div id="importStatus"></div>
        <div class="progress-container" style="margin-top: 10px; display: none;">
          <progress id="importProgress" value="0" max="100" style="width: 100%;"></progress>
          <div id="importProgressText" style="text-align: center; margin-top: 5px;">0%</div>
        </div>
      </div>

          <!-- 多语言提示框 -->
          <div class="multilingual-note">
            <div class="note-title" data-i18n="noteImportant">Note</div>

            <div class="note-content">
              <span class="lang-tag lang-en">EN</span>
              <span>
                <!-- <br> <a href="https://lingkuma.notion.site/How-can-I-import-known-words-at-the-beginning-1b899894aa168037b33ce34fa7a22133" target="_blank" rel="noopener noreferrer">点击此处获取导入单词列表的说明</a> -->
                <br> <a href="https://docs.lingkuma.org/en/intro/start/start.html#import-vocabulary" target="_blank" rel="noopener noreferrer">点击此处获取导入单词列表的说明</a>
                <br>e.g.
                <br>english.txt:
                <br>apple
                <br>banana
                <br>orange
                <br>pear
                <br>
                <br>chinese.txt:
                <br>苹果
                <br>香蕉
                <br>橙子
                <br>梨
                <br>
                <br>german.txt:
                <br>Apfel
                <br>Banane
                <br>Orange
                <br>Birne
                <br>Deutsch
                <br>
                <br>japanese.txt:
                <br>りんご
                <br>ばなな
                <br>みかん
                <br>なし
                <br>ドイツ語

              </span>
            </div>
          </div>



    </div>

    <!-- Panel3：数据库备份与还原 -->
    <div id="panel-backup" class="hidden">


      <!-- <h2 data-i18n="webdavSettings">WebDAV 设置</h2>

      <div class="settings-section" style="margin-bottom: 20px;">
          <h3 data-i18n="webdavCredentials">WebDAV 凭据</h3>
          <div class="setting-item" style="margin-bottom: 10px;">
              <label for="webdavUrl" style="display: block; margin-bottom: 5px;" data-i18n="webdavUrlLabel">URL:</label>
              <input type="text" id="webdavUrl" data-auto-save="true" data-storage-key="webdavUrl" data-storage-area="syncConfig" placeholder="https://example.com/dav/" style="width: 100%; padding: 8px;">
              <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          </div>
          <div class="setting-item" style="margin-bottom: 10px;">
              <label for="webdavUsername" style="display: block; margin-bottom: 5px;" data-i18n="webdavUsernameLabel">用户名:</label>
              <input type="text" id="webdavUsername" data-auto-save="true" data-storage-key="webdavUsername" data-storage-area="syncConfig" placeholder="用户名" style="width: 100%; padding: 8px;">
              <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          </div>
          <div class="setting-item" style="margin-bottom: 10px;">
              <label for="webdavPassword" style="display: block; margin-bottom: 5px;" data-i18n="webdavPasswordLabel">密码:</label>
              <input type="password" id="webdavPassword" data-auto-save="true" data-storage-key="webdavPassword" data-storage-area="syncConfig" placeholder="密码" style="width: 100%; padding: 8px;">
              <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          </div>
      </div>

      <div class="backup-section">
          <h3 data-i18n="webdavActions">WebDAV 操作</h3>
          <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 10px;">
              <button id="webdavUploadSync" data-i18n="webdavUploadSyncBtn">上传同步文件 (覆盖云端)</button>
              <button id="webdavDownloadMerge" data-i18n="webdavDownloadMergeBtn">下载合并文件 (合并本地)</button>
              <button id="webdavUploadBackup" data-i18n="webdavUploadBackupBtn">上传日期备份文件 (到云端)</button>
              <button id="webdavClearDb" data-i18n="webdavClearDbBtn" style="background-color: var(--danger-color);">清空本地数据库</button>
          </div>
          <div id="webdavStatus" style="margin-top: 10px;"></div>
      </div>

 <div class="multilingual-note">
  <div class="note-title" data-i18n="noteImportant">重要提示</div>

  <div class="note-content">
    <span class="lang-tag lang-en">EN</span>
    <span>
      <br>Jianguoyun: url : <a href="https://www.jianguoyun.com/#/" target="_blank" rel="noopener noreferrer">https://www.jianguoyun.com/#/</a>
      <br>Jianguoyun WebDAV Setup Tutorial: <a href="https://help.jianguoyun.com/?p=2064" target="_blank" rel="noopener noreferrer">https://help.jianguoyun.com/?p=2064</a>
      <br>
      <br>Upload Sync File (Overwrite Cloud): There is only one sync file. Uploading from any device will overwrite this single file.
      <br>Download Merge File (Merge Locally): This downloads the sync file from the cloud and merges it with your local data. If a word doesn't exist locally, it will be added. If a word exists locally, its data will be overwritten by the cloud version.
      <br>Upload Dated Backup File (to Cloud): Each upload creates a new, uniquely named backup file (typically including the date).
    </span>
  </div>
  <div class="note-content">
    <span class="lang-tag lang-zh">中</span>
    <span>
      <br>坚果云：  url : <a href="https://www.jianguoyun.com/#/" target="_blank" rel="noopener noreferrer">https://www.jianguoyun.com/#/</a>
      <br>坚果云Webdav生成教程： <a href="https://help.jianguoyun.com/?p=2064" target="_blank" rel="noopener noreferrer">https://help.jianguoyun.com/?p=2064</a>
      <br>上传同步文件 (覆盖云端)：这个只有一份，任何设备上传都会覆盖这一个。
      <br>下载合并文件 (合并本地)：这个会下载上面的这一份，然后同步到本地。如果本地没有某单词，那么加添加进来。如果本地有某单词 ，那么会覆盖掉。
      <br>上传日期备份文件 (到云端)：每次都上传一份不同命的备份。

    </span>
  </div>
</div>


 -->







      <h2 data-i18n="dbBackup">数据库备份与还原</h2>

      <!-- 添加配置备份部分 -->
      <div class="backup-section" style="margin-bottom: 30px;">
        <h3 data-i18n="wordDbBackup">词库数据备份</h3>
        <div style="margin-bottom: 20px;">
          <button id="backupBtn" data-i18n="backupDb">备份词库数据</button>
        </div>
        <div style="margin-bottom: 20px;">
          <a id="downloadLink" style="display:none;" data-i18n="downloadBackup">点击下载备份文件</a>
        </div>
        <div>
          <input type="file" id="backupFile" accept=".json" />
          <button id="restoreBtn" data-i18n="importBackup">导入词库备份</button>
        </div>
        <!-- 新增：恢复进度条容器 -->
        <div id="restoreProgressContainer" style="margin-top: 10px; display: none;">
            <progress id="restoreProgress" value="0" max="100" style="width: 100%;"></progress>
            <div id="restoreProgressText" style="text-align: center; margin-top: 5px;">0%</div>
        </div>
        <div id="backupStatus" style="margin-top: 10px;"></div>
      </div>

      <!-- 新增配置备份部分 -->
      <div class="backup-section">
        <h3 data-i18n="configBackup">配置数据备份</h3>
        <div style="margin-bottom: 20px;">
          <button id="backupConfigBtn" data-i18n="backupConfig">备份配置数据</button>
        </div>
        <div style="margin-bottom: 20px;">
          <a id="downloadConfigLink" style="display:none;" data-i18n="downloadConfigBackup">点击下载配置备份文件</a>
        </div>
        <div>
          <input type="file" id="backupConfigFile" accept=".json" />
          <button id="restoreConfigBtn" data-i18n="importConfigBackup">导入配置备份</button>
        </div>
        <div id="backupConfigStatus" style="margin-top: 10px;"></div>
      </div>




      <div class="multilingual-note">
        <div class="note-title" data-i18n="noteImportant">重要提示</div>

        <div class="note-content">
          <span class="lang-tag lang-en">EN</span>
          <span>
            <br>backup database to local
            <br>backup settings to local
            <br>support webdav cloud backup, multi-device sync
            </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-zh">中</span>
          <span>
            <br>备份词库数据到本地
            <br>备份设置数据到本地
            <br>推荐使用webdav进行云备份，可多设备同步
          </span>
        </div>
      </div>





    </div>

    <!-- 新增：弹窗背景设置面板 -->
    <div id="panel-tooltip-bg-settings" class="hidden">

      <h2 data-i18n="tooltipSettings">玻璃材质设置</h2>
      <!-- 新增：玻璃材质选择器 -->
      <div class="settings-section" style="padding: 20px; border-radius: 10px; margin-bottom: 20px; margin-top: 20px;">
        <h3 style="margin-top: 0;" data-i18n="glassEffectSettings">玻璃材质设置</h3>

        <div class="setting-item" style="margin-bottom: 20px;">
          <label style="display: block; margin-bottom: 10px; font-weight: 500;" data-i18n="glassEffectType">玻璃效果类型</label>
          <select id="glassEffectType" style="width: 100%; padding: 8px; border: 1px solid #444; border-radius: 5px; background: #2a2a2a; color: #ffffff;">
            <option value="liquid" data-i18n="glassEffectLiquid">液态玻璃 (Liquid) ⚠️卡顿，不建议使用 </option>
            <option value="rough" data-i18n="glassEffectRough">粗糙 (Rough)</option>
            <option value="fluted" data-i18n="glassEffectFluted">凹槽 (Fluted)</option>
            <option value="tiled" data-i18n="glassEffectTiled">瓷砖 (Tiled)</option>
            <option value="pixel" data-i18n="glassEffectPixel">像素化 (Pixel)</option>
            <option value="mosaic" data-i18n="glassEffectMosaic">马赛克 (Mosaic)</option>
            <option value="fractal" data-i18n="glassEffectFractal">分形噪声 (Fractal)</option>
            <option value="rgb-split" data-i18n="glassEffectRgbSplit">RGB分离 (RGB Split)</option>
            <option value="ellipses" data-i18n="glassEffectEllipses">椭圆 (Ellipses)</option>
            <option value="bulge" data-i18n="glassEffectBulge">凸起 (Bulge)</option>
            <option value="flip" data-i18n="glassEffectFlip">翻转 (Flip)</option>
          </select>
        </div>

        <!-- 玻璃材质预览 -->
        <div class="setting-item" style="margin-top: 20px;">
          <label style="display: block; margin-bottom: 10px; font-weight: 500;" data-i18n="glassEffectPreview">效果预览</label>
          <div style="width: 100%; height: 450px; border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden;">
            <iframe
              id="glassEffectPreviewFrame"
              src="liquid-group/index.html"
              style="width: 100%; height: 100%; border: none;"
              sandbox="allow-scripts allow-same-origin">
            </iframe>
          </div>
        </div>

        <!-- 自动保存提示 -->
        <div style="margin-top: 10px; color: var(--text-secondary); font-style: italic; font-size: 12px;" data-i18n="glassEffectAutoSave">
          设置会自动保存并应用到弹窗
        </div>
      </div>



      <!-- <h2 data-i18n="tooltipSettings">弹窗设置</h2> -->

      <div class="settings-section" style="padding: 20px; border-radius: 10px; margin-bottom: 20px;">
        <h3 style="margin-top: 0;" data-i18n="tooltipThemeSettings">弹窗主题设置</h3>

        <!-- 新增：弹窗主题模式选择 -->
        <div class="setting-item" style="margin-bottom: 20px;">
          <label style="display: block; margin-bottom: 10px; font-weight: 500;" data-i18n="tooltipThemeMode">弹窗主题模式</label>
          <div class="radio-group" style="display: flex; gap: 20px;">
            <div class="radio-item">
              <input type="radio" id="tooltipThemeAuto" name="tooltipThemeMode" value="auto" checked>
              <label for="tooltipThemeAuto" data-i18n="autoDetect">自动检测（跟随网页）</label>
            </div>
            <div class="radio-item">
              <input type="radio" id="tooltipThemeLight" name="tooltipThemeMode" value="light">
              <label for="tooltipThemeLight" data-i18n="lightMode">固定亮色主题</label>
            </div>
            <div class="radio-item">
              <input type="radio" id="tooltipThemeDark" name="tooltipThemeMode" value="dark">
              <label for="tooltipThemeDark" data-i18n="darkMode">固定暗色主题</label>
            </div>
          </div>
        </div>

        <h3 style="margin-top: 20px;" data-i18n="backgroundDisplayOptions">背景显示选项</h3>

        <!-- 背景启用开关 -->
        <div class="setting-item" style="margin-bottom: 15px; display: flex; align-items: center;">
          <input type="checkbox" id="enableTooltipBg" style="margin-right: 10px;"> <!-- 移除 'checked'，将由JS控制 -->
          <label for="enableTooltipBg" style="font-weight: 500;" data-i18n="enableTooltipBackground">启用背景效果</label>
        </div>

        <!-- 背景类型选择 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <label style="display: block; margin-bottom: 10px; font-weight: 500;" data-i18n="backgroundType">背景类型</label>
          <div class="radio-group" style="display: flex; gap: 20px;">
            <div class="radio-item">
              <input type="radio" id="bgTypeDefault" name="bgType" value="default" checked>
              <label for="bgTypeDefault" data-i18n="defaultBackground">使用插件内置背景</label>
            </div>
            <div class="radio-item">
              <input type="radio" id="bgTypeCustom" name="bgType" value="custom">
              <label for="bgTypeCustom" data-i18n="customBackground">使用自定义背景</label>
            </div>
          </div>
        </div>

        <!-- 新增：默认背景类型选择 (仅当选择"使用默认背景"时显示) -->
        <div id="defaultBgTypeSection" class="setting-item" style="margin-bottom: 15px; margin-left: 20px;">
          <label style="display: block; margin-bottom: 10px; font-weight: 500;" data-i18n="defaultBackgroundType">内置背景类型</label>
          <div class="radio-group" style="display: flex; flex-direction: column; gap: 10px; align-items: flex-start;">
            <div class="radio-item">
              <input type="radio" id="defaultBackgroundImage" name="defaultBackgroundType" value="image">
              <label for="defaultBackgroundImage" data-i18n="imageBackground">随机图片背景</label>
            </div>
            <div class="radio-item">
              <input type="radio" id="defaultBackgroundSvg" name="defaultBackgroundType" value="svg" checked> <!-- 默认选中SVG -->
              <label for="defaultBackgroundSvg" data-i18n="svgBackground">随机SVG图案</label>
            </div>
            <div class="radio-item">
              <input type="radio" id="defaultBackgroundVideo" name="defaultBackgroundType" value="video">
              <label for="defaultBackgroundVideo" data-i18n="videoBackground">默认视频背景</label>
            </div>
            <div class="radio-item">
              <input type="radio" id="defaultBackgroundSpecific" name="defaultBackgroundType" value="specific">
              <label for="defaultBackgroundSpecific" data-i18n="specificBackground">指定内置背景</label>
            </div>
          </div>

          <!-- 指定内置背景预览区域 -->
          <div id="specificBgPreviewSection" style="margin-top: 15px; display: none;">
            <h4 data-i18n="builtInBackgroundPreview">内置背景预览</h4>
            <div id="builtInBgGallery" style="display: flex; flex-wrap: wrap; gap: 15px; padding: 10px 0; max-width: 100%; justify-content: flex-start;">
              <!-- 内置背景预览将通过JavaScript动态添加 -->
            </div>
          </div>
        </div>

        <!-- 自定义背景上传 -->
        <div id="customBgSection" style="margin-top: 20px; display: none;">
          <h3 data-i18n="customBackground">自定义背景</h3>

          <div class="setting-item" style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 10px;" data-i18n="customBackgroundFile">上传背景文件 (支持图片和视频)</label>
            <input type="file" id="customBgFile" accept="image/png,image/jpeg,image/gif,image/svg+xml,video/mp4,video/webm,video/ogg">
            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;" data-i18n="supportedFormats">
              支持的格式：PNG, JPEG, GIF, SVG, MP4, WebM, OGG
            </div>
          </div>

          <!-- 自定义背景预览 - 只在选中自定义背景时显示 -->
          <div id="customBgPreview" style="margin-top: 15px; display: none;">
            <h4 data-i18n="preview">预览</h4>
            <div style="max-width: 300px; max-height: 200px; overflow: hidden; border: 1px solid var(--border-color); border-radius: 5px; margin-top: 10px;">
              <!-- 预览内容将通过JavaScript动态添加 -->
            </div>
          </div>
        </div>
      </div>

      <!-- 自动保存提示 -->
      <div style="margin-top: 10px; margin-bottom: 10px; color: var(--text-secondary); font-style: italic;" data-i18n="autoSaveHint">
        设置会自动保存
      </div>

      <!-- 提示信息 -->
      <div class="multilingual-note" style="margin-top: 30px;">
        <div class="note-title" data-i18n="tips">提示</div>
        <div class="note-content">
          <span class="lang-tag lang-zh">中</span>
          <span data-i18n="backgroundNote">
            <br>• 弹窗主题模式：自动检测会根据网页的明暗自动调整，固定模式则始终使用选定的主题
            <br>• 背景效果会显示在弹窗的底层，不会影响文字阅读
            <br>• 视频背景会自动循环播放且静音
            <br>• 图片和视频的透明度已调整为适合阅读
            <br>• 如果上传的文件过大，可能会影响性能
          </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-en">EN</span>
          <span data-i18n="backgroundNote">
            <br>• Tooltip Theme Mode: Auto-detect adjusts based on the webpage's theme, while fixed modes always use the selected theme
            <br>• Background effects appear behind the tooltip content and won't affect text readability
            <br>• Video backgrounds will automatically loop and are muted
            <br>• Image and video opacity is adjusted for optimal reading experience
            <br>• Large files may impact performance
          </span>
        </div>
      </div>

    </div>

    <!-- 新增：自定义胶囊配置面板 -->
    <div id="panel-custom-capsules" class="hidden">
      <h2 data-i18n="customCapsulesSettings">自定义胶囊设置</h2>

      <div class="settings-section" style="padding: 20px; border-radius: 10px; margin-bottom: 20px;">
        <h3 style="margin-top: 0;" data-i18n="customCapsulesDescription">自定义胶囊容器和按钮</h3>

        <div style="margin-bottom: 20px; padding: 15px; background: var(--highlight-color); border-radius: 8px;">
          <p style="margin: 0; font-size: 14px; line-height: 1.6;" data-i18n="customCapsulesHelp">
            <strong>胶囊容器</strong>：每个胶囊容器是一行，可以包含多个按钮。多个胶囊容器会向上叠加显示。<br>
            <strong>按钮</strong>：每个按钮是一个搜索触发器，点击后打开指定URL。URL中的 <code>{word}</code> 会被替换为当前单词。
          </p>
        </div>

        <!-- 胶囊容器列表 -->
        <div id="capsulesContainerList" style="margin-bottom: 20px;">
          <!-- 胶囊容器将通过JavaScript动态添加 -->
        </div>

        <!-- 添加新胶囊容器按钮 -->
        <button id="addCapsuleContainerBtn" style="padding: 10px 20px; background: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px;">
          <span data-i18n="addCapsuleContainer">+ 添加胶囊容器</span>
        </button>
      </div>

      <!-- 提示信息 -->
      <div class="multilingual-note" style="margin-top: 30px;">
        <div class="note-title" data-i18n="tips">提示</div>
        <div class="note-content">
          <span class="lang-tag lang-zh">中</span>
          <span>
            <br>• <strong>胶囊容器</strong>：一个横向的按钮容器，多个容器会向上叠加
            <br>• <strong>按钮名称</strong>：按钮上显示的文字
            <br>• <strong>URL</strong>：要打开的网址，使用 {word} 作为当前单词的占位符
            <br>• <strong>打开方式</strong>：
            <br>&nbsp;&nbsp;- 新标签页：在浏览器新标签页中打开
            <br>&nbsp;&nbsp;- iframe弹窗：在当前页面的弹窗中以iframe形式打开
            <br>&nbsp;&nbsp;- 新窗口：在新的浏览器窗口中打开
            <br>&nbsp;&nbsp;- 侧边栏：在浏览器侧边栏中打开
            <br>• <strong>示例</strong>：
            <br>&nbsp;&nbsp;容器1：[Google图片] [维基百科] [词典]
            <br>&nbsp;&nbsp;容器2：[YouTube] [翻译]
            <br>• <strong>示例URL</strong>：https://www.google.com/search?q={word}&tbm=isch
          </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-en">EN</span>
          <span>
            <br>• <strong>Capsule Container</strong>: A horizontal button container, multiple containers stack upward
            <br>• <strong>Button Name</strong>: Text displayed on the button
            <br>• <strong>URL</strong>: The URL to open, use {word} as placeholder for current word
            <br>• <strong>Open Method</strong>:
            <br>&nbsp;&nbsp;- New Tab: Open in a new browser tab
            <br>&nbsp;&nbsp;- iframe Popup: Open in an iframe popup on current page
            <br>&nbsp;&nbsp;- New Window: Open in a new browser window
            <br>&nbsp;&nbsp;- Sidebar: Open in browser sidebar
            <br>• <strong>Example</strong>:
            <br>&nbsp;&nbsp;Container 1: [Google Images] [Wikipedia] [Dictionary]
            <br>&nbsp;&nbsp;Container 2: [YouTube] [Translate]
            <br>• <strong>Example URL</strong>: https://www.google.com/search?q={word}&tbm=isch
          </span>
        </div>
      </div>
    </div>

    <!-- 新增：已知句子动效配置面板 -->
    <div id="panel-known-sentence-animation" class="hidden">
      <h2 data-i18n="knownSentenceAnimationSettings">已知句子动效设置</h2>

      <div class="settings-section" style="padding: 20px; border-radius: 10px; margin-bottom: 20px;">
        <h3 style="margin-top: 0;" data-i18n="animationDescription">句子爆炸已知句子效果动图配置</h3>

        <div style="margin-bottom: 20px; padding: 15px; background: var(--highlight-color); border-radius: 8px;">
          <p style="margin: 0; font-size: 14px; line-height: 1.6;" data-i18n="animationHelp">
            配置当句子中没有未知单词时显示的动效图。可以设置顶层和底层两个动图，支持选择预设动图或上传自定义TGS文件。
          </p>
        </div>

        <!-- 动图尺寸设置 -->
        <div style="margin-bottom: 30px; padding: 15px; border: 1px solid var(--border-color); border-radius: 8px;">
          <h4 style="margin-top: 0;" data-i18n="animationSize">动图尺寸</h4>
          <div style="display: flex; align-items: center; gap: 15px;">
            <label for="animationWidth" style="font-weight: 500;" data-i18n="animationWidth">宽度 (px):</label>
            <input type="number" id="animationWidth" min="50" max="500" value="150"
                   style="width: 100px; padding: 5px; border: 1px solid var(--border-color); border-radius: 4px;">
            <label for="animationHeight" style="font-weight: 500;" data-i18n="animationHeight">高度 (px):</label>
            <input type="number" id="animationHeight" min="50" max="500" value="150"
                   style="width: 100px; padding: 5px; border: 1px solid var(--border-color); border-radius: 4px;">
          </div>
          <p style="margin: 10px 0 0 0; font-size: 12px; color: var(--text-secondary);" data-i18n="animationDefaultSize">
            默认: 150x150px
          </p>
        </div>

        <!-- 顶层动图设置 -->
        <div style="margin-bottom: 30px; padding: 15px; border: 1px solid var(--border-color); border-radius: 8px;">
          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
            <h4 style="margin: 0;" data-i18n="topLayerAnimation">顶层动图</h4>
            <label class="animation-toggle-label">
              <input type="checkbox" id="topAnimationEnabled" checked class="animation-toggle-checkbox">
              <span class="animation-toggle-slider"></span>
              <span class="animation-toggle-text" data-i18n="enable">启用</span>
            </label>
          </div>

          <div id="topAnimationSettings">
            <div style="margin-bottom: 15px;">
              <label style="display: block; margin-bottom: 12px; font-weight: 500;" data-i18n="selectAnimation">选择动图:</label>
              <div id="topAnimationGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 15px; margin-bottom: 15px;">
                <!-- 动图预览将通过JS动态生成 -->
              </div>
            </div>

            <div id="topAnimationCustomUpload" style="margin-top: 15px; padding: 15px; border: 1px dashed var(--border-color); border-radius: 8px; text-align: center;">
              <label for="topAnimationFile" style="display: block; margin-bottom: 8px; font-weight: 500; cursor: pointer;" data-i18n="uploadCustom">
                <span style="font-size: 24px; display: block; margin-bottom: 8px;">📤</span>
                上传自定义TGS文件
              </label>
              <input type="file" id="topAnimationFile" accept=".tgs"
                     style="display: none;">
              <button id="topAnimationFileBtn"
                      style="padding: 8px 20px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--background-color); color: var(--text-color); cursor: pointer;" data-i18n="selectFile">
                选择文件
              </button>
              <p style="margin: 8px 0 0 0; font-size: 12px; color: var(--text-secondary);" data-i18n="tgsFormatOnly">
                仅支持 .tgs 格式的动画文件
              </p>
            </div>
          </div>
        </div>

        <!-- 底层动图设置 -->
        <div style="margin-bottom: 30px; padding: 15px; border: 1px solid var(--border-color); border-radius: 8px;">
          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
            <h4 style="margin: 0;" data-i18n="bottomLayerAnimation">底层动图</h4>
            <label class="animation-toggle-label">
              <input type="checkbox" id="bottomAnimationEnabled" class="animation-toggle-checkbox">
              <span class="animation-toggle-slider"></span>
              <span class="animation-toggle-text" data-i18n="enable">启用</span>
            </label>
          </div>

          <div id="bottomAnimationSettings" style="display: none;">
            <div style="margin-bottom: 15px;">
              <label style="display: block; margin-bottom: 12px; font-weight: 500;" data-i18n="selectAnimation">选择动图:</label>
              <div id="bottomAnimationGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 15px; margin-bottom: 15px;">
                <!-- 动图预览将通过JS动态生成 -->
              </div>
            </div>

            <div id="bottomAnimationCustomUpload" style="margin-top: 15px; padding: 15px; border: 1px dashed var(--border-color); border-radius: 8px; text-align: center;">
              <label for="bottomAnimationFile" style="display: block; margin-bottom: 8px; font-weight: 500; cursor: pointer;" data-i18n="uploadCustom">
                <span style="font-size: 24px; display: block; margin-bottom: 8px;">📤</span>
                上传自定义TGS文件
              </label>
              <input type="file" id="bottomAnimationFile" accept=".tgs"
                     style="display: none;">
              <button id="bottomAnimationFileBtn"
                      style="padding: 8px 20px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--background-color); color: var(--text-color); cursor: pointer;" data-i18n="selectFile">
                选择文件
              </button>
              <p style="margin: 8px 0 0 0; font-size: 12px; color: var(--text-secondary);" data-i18n="tgsFormatOnly">
                仅支持 .tgs 格式的动画文件
              </p>
            </div>
          </div>
        </div>

        <div style="margin-top: 20px; padding: 12px; background: var(--success-color); color: white; border-radius: 6px; text-align: center; display: none;" id="animationSaveHint">
          <span data-i18n="autoSaved">✓ 设置已自动保存</span>
        </div>
      </div>
    </div>

    <!-- 设置 API 配置 -->
    <div id="panel-api-basic" class="hidden">
      <h2 data-i18n="apiBasicSettings">API 基本设置</h2>

      <!-- 新增：AI 渠道选择 -->
      <div class="settings-section" style="padding: 10px;  border-radius: 5px; margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px;" data-i18n="aiChannelLabel">AI Provider:</label>
        <div class="radio-group" style="display: flex; gap: 15px;">
          <div class="radio-item" style="display: flex; align-items: center;">
            <input type="radio" id="aiChannelDiy" name="aiChannel" value="diy" data-auto-save="true" data-storage-key="aiChannel" data-storage-area="aiConfig" style="margin-right: 5px;">
            <label for="aiChannelDiy" data-i18n="aiChannelDiy">Custom</label>
          </div>
          <div class="radio-item" style="display: flex; align-items: center;">
            <input type="radio" id="aiChannelOhmygpt" name="aiChannel" value="ohmygpt" data-auto-save="true" data-storage-key="aiChannel" data-storage-area="aiConfig" style="margin-right: 5px;">
            <label for="aiChannelOhmygpt" data-i18n="aiChannelOhmygpt">OhMyGpt</label>
          </div>
        </div>
        <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
      </div>





<!-- 各个AI APi平台 -->

    














    <div id="customApiSettings" class="settings-section" style="padding: 10px;  border-radius: 5px;">
      <!-- 多配置管理区域 -->
      <div id="customApiProfilesManager" style="margin-bottom: 15px;">
        <!-- Tab 栏 -->
        <div id="customApiTabs" style="display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 10px; border-bottom: 1px solid var(--border-color, #ddd); padding-bottom: 10px;">
          <!-- Tab 项将通过 JS 动态生成 -->
        </div>
        <!-- 操作栏：下拉框激活 + 添加按钮 -->
        <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
          <div style="display: flex; align-items: center; gap: 5px;">
            <label for="activeProfileSelect" style="font-size: 12px; white-space: nowrap;" data-i18n="activeProfileLabel">Active Config:</label>
            <select id="activeProfileSelect" style="padding: 5px 10px; border-radius: 4px; border: 1px solid var(--border-color, #ddd); min-width: 150px;">
              <!-- 选项将通过 JS 动态生成 -->
            </select>
          </div>
          <button id="addCustomProfileBtn" type="button" style="padding: 5px 15px; border-radius: 4px; border: 1px solid var(--border-color, #ddd); background: var(--bg-secondary, #f5f5f5); cursor: pointer; font-size: 12px;" data-i18n="addProfileBtn">+ Add Config</button>
        </div>
      </div>
      <!-- 配置内容区域 -->
      <div id="customApiProfileContent">
        <div class="setting-item" style="margin-bottom: 10px;">
          <label for="profileName" style="display: block; margin-bottom: 5px;" data-i18n="profileName">Config Name:</label>
          <input type="text" id="profileName" placeholder="My API Config" style="width: 100%; padding: 8px;">
        </div>
        <div class="setting-item" style="margin-bottom: 10px;">
          <label for="apiBaseURL" style="display: block; margin-bottom: 5px;" data-i18n="apiBaseUrl">Custom API Base URL: example: https://api.chatgpt.com/v1/chat/completions </label>
          <input type="text" id="apiBaseURL" placeholder="https://api.example.com/v1/chat/completions" style="width: 100%; padding: 8px;">
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>
        <div class="setting-item" style="margin-bottom: 10px;">
          <label for="apiKey" style="display: block; margin-bottom: 5px;" data-i18n="apiKey">API Key:</label>
          <input type="text" id="apiKey" placeholder="sk-xxxxxxxx" style="width: 100%; padding: 8px;">
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>
        <div class="setting-item" style="margin-bottom: 10px;">
          <label for="apiModel" style="display: block; margin-bottom: 5px;" data-i18n="model">Modell:</label>
          <input type="text" id="apiModel" placeholder="gemini-2.5-flash" style="width: 100%; padding: 8px;">
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>
        <div class="setting-item" style="margin-bottom: 10px;">
          <label for="apiTemperature" style="display: block; margin-bottom: 5px;" data-i18n="apiTemperature">Temperature (0-2):</label>
          <input type="number" id="apiTemperature" placeholder="1" min="0" max="2" step="0.1" value="1" style="width: 100%; padding: 8px;">
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>
      </div>
    </div>



  <!-- OhMyGpt 设置 - 新的布局容器 -->
  <div id="ohmygptSettings" class="settings-section" style="padding: 10px;  border-radius: 5px; margin-top: 15px; display: flex; gap: 20px; ">

    <!-- 左列: OhMyGpt 模型 -->
    <div style="flex: 1;"> <!-- 让左列占据可用空间 -->
      <div class="setting-item">
        <label for="ohmygptModel" style="display: block; margin-bottom: 5px;" data-i18n="ohmygptModelLabel">OhMyGpt Model:
          <a href="https://next.ohmygpt.com/i/G59XB6M4" target="_blank" style="font-size: 12px; margin-left: 5px;" data-i18n="pricingLink">Register Now(注册ohmygpt)</a>

        </label>
        <input type="text" id="ohmygptModel" data-auto-save="true" data-storage-key="ohmygptModel" data-storage-area="aiConfig" placeholder="gemini-2.5-flash" style="width: 100%; padding: 8px;">
        <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
      </div>
      <div class="setting-item" style="margin-top: 10px;">
        <label for="ohmygptTemperature" style="display: block; margin-bottom: 5px;" data-i18n="ohmygptTemperature">Temperature (0-2):</label>
        <input type="number" id="ohmygptTemperature" data-auto-save="true" data-storage-key="ohmygptTemperature" data-storage-area="aiConfig" placeholder="1" min="0" max="2" step="0.1" value="1" style="width: 100%; padding: 8px;">
        <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
      </div>
    </div>

    <!-- 右列: OhMyGpt Base URL -->

    <!-- 注意：将原来的 id="settings-section" 改为了 class="ohmygpt-url-section"，因为 id 应该是唯一的 -->
  <!-- 右列: OhMyGpt Base URL -->
  <div class="ohmygpt-url-section" style="flex: 2;">
    <!-- 明确设置 padding-left: 0 -->
    <label style="display: block; margin-bottom: 10px; font-weight: 600; padding-left: 0;" data-i18n="ohmygptBaseUrlLabel">OhMyGpt Base URL:</label>
    <div class="radio-group" style="display: flex   ; gap: 10px;">
      <!-- Option 1: Recommended -->
      <div class="radio-item" style="display: flex; align-items: center;">
        <!-- 明确设置 margin-left: 0 -->
        <input type="radio" id="ohmygptBaseUrl1" name="ohmygptBaseUrl" value="https://api.ohmygpt.com/v1/chat/completions" data-auto-save="true" data-storage-key="ohmygptBaseUrl" data-storage-area="aiConfig" style="margin-left: 0; margin-right: 8px;">
        <label for="ohmygptBaseUrl1" style="cursor: pointer;">
          <strong data-i18n="ohmygptBaseUrlRecommended"></strong> https://api.ohmygpt.com/ <br>
          <small style="color: var(--text-secondary);" data-i18n="ohmygptBaseUrlRecommendedDesc">US Direct | Enterprise</small>
        </label>
      </div>
      <!-- Option 2: Cloudflare CDN -->
      <div class="radio-item" style="display: flex; align-items: center;">
        <!-- 明确设置 margin-left: 0 -->
        <input type="radio" id="ohmygptBaseUrl2" name="ohmygptBaseUrl" value="https://apic1.ohmycdn.com/v1/chat/completions" data-auto-save="true" data-storage-key="ohmygptBaseUrl" data-storage-area="aiConfig" style="margin-left: 0; margin-right: 8px;">
        <label for="ohmygptBaseUrl2" style="cursor: pointer;">
          <strong data-i18n="ohmygptBaseUrlCloudflare"></strong> https://apic1.ohmycdn.com <br>
          <small style="color: var(--text-secondary);" data-i18n="ohmygptBaseUrlCloudflareDesc">Cloudflare CDN | Global</small>
        </label>
      </div>
      <!-- Option 3: Asia Optimized -->
      <div class="radio-item" style="display: flex; align-items: center;">
        <!-- 明确设置 margin-left: 0 -->
        <input type="radio" id="ohmygptBaseUrl3" name="ohmygptBaseUrl" value="https://c-z0-api-01.hash070.com/v1/chat/completions" data-auto-save="true" data-storage-key="ohmygptBaseUrl" data-storage-area="aiConfig" style="margin-left: 0; margin-right: 8px;">
        <label for="ohmygptBaseUrl3" style="cursor: pointer;">
          <strong data-i18n="ohmygptBaseUrlMainland"></strong> https://c-z0-api-01.hash070.com <br>
          <small style="color: var(--text-secondary);" data-i18n="ohmygptBaseUrlMainlandDesc">Asia Optimized CDN</small>
        </label>
      </div>
      <!-- Option 4: CN2 GIA -->
      <div class="radio-item" style="display: flex; align-items: center;">
        <!-- 明确设置 margin-left: 0 -->
        <input type="radio" id="ohmygptBaseUrl4" name="ohmygptBaseUrl" value="https://cn2us02.opapi.win/v1/chat/completions" data-auto-save="true" data-storage-key="ohmygptBaseUrl" data-storage-area="aiConfig" style="margin-left: 0; margin-right: 8px;">
        <label for="ohmygptBaseUrl4" style="cursor: pointer;">
          <strong data-i18n="ohmygptBaseUrlCn2"></strong> https://cn2us02.opapi.win <br>
          <small style="color: var(--text-secondary);" data-i18n="ohmygptBaseUrlCn2Desc">CN2 GIA | Asia</small>
        </label>
      </div>
    </div>
    <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
  </div>


  </div>
  <!-- OhMyGpt 设置结束 -->



 <!-- 添加多语言提示框 -->
 <div class="multilingual-note">
    <div class="note-title" data-i18n="noteImportant">EN</div>
    <div class="note-content">
      <span class="lang-tag lang-en">EN</span>
      <span>
        <br><a href="https://next.ohmygpt.com/i/G59XB6M4" target="_blank">get api key from Ohmygpt， Ohmygpt is a powerful AI transfer platform,</a>
        <br><a href="https://youtu.be/RHh3Upabtfk?si=MND53SpEk7RjWYCk&t=322" target="_blank">how to use Ohmygpt </a>
        <br> support google/openai/Anthropic/all models, can invoice, can register with the above invitation code. Or add the invitation code manually later: G59XB6M4
        <!--<br>Due to CORS restrictions set by Gemini, it cannot be used directly here. Please set up your own relay service or use ohmygpt.-->
        <br>You can directly use other AI models compatible with the ChatGPT format. Please apply for them yourself. Tutorial: <a href="https://docs.lingkuma.org/en/intro/start/start.html" target="_blank">Apply for AI API</a>
        <!-- <br>Google Gemini , free and powerful , but you have to self host <a href="https://aistudio.google.com/app/apikey" target="_blank">https://aistudio.google.com/app/apikey</a>
        <br>DeepSeek , cheap and good: <a href="https://platform.deepseek.com/api_keys" target="_blank">https://platform.deepseek.com/api_keys</a>  -->
      </span>
    </div>
    <div class="note-content">
      <span class="lang-tag lang-zh">中</span>
      <span>

        <br>最低推荐模型：gemini-2.5-flash / gemini-flash-latest ，4路并发。
        <br>
        <br>推荐1：<a href="https://next.ohmygpt.com/i/G59XB6M4" target="_blank">ohmygpt</a> AI中转平台  <a href="https://youtu.be/RHh3Upabtfk?si=MND53SpEk7RjWYCk&t=322" target="_blank">（使用教程） </a>
        <br>企业级中转，支持谷歌/openai/Anthropic等所有模型，可开发票，可走上方我的邀请码进行注册。或后续手动添加邀请码：G59XB6M4
        <br>可在左侧第三方授权登录处授权登录，直接调用其任意模型进行使用，使用请遵循当地法律法规。
        <br>
        <br>推荐2：智谱 <a href="https://bigmodel.cn/usercenter/proj-mgmt/rate-limits" target="_blank">https://bigmodel.cn/usercenter/proj-mgmt/rate-limits</a>  
        <br>本插件内置智谱AI的免费API，默认模型为 GLM-4-Flash（200并发）,智商可能过低。如果翻译失败，就是免费Api失效了。
        <br>你可自行注册后使用自己的免费API，改成模型：GLM-4-Flash-250414（20并发），智商稍高，应该够用。
        <br>
        <br>其他兼容chatgpt格式的ai都可直接使用，请自行申请。教程： <a href="https://docs.lingkuma.org/zh/intro/start/start.html#%E6%88%91%E6%80%8E%E4%B9%88%E5%8E%BB%E6%89%BE%E8%BF%99%E4%B8%AAapi-%E6%8E%A5%E5%8F%A3" target="_blank">申请AI API</a>
        <br>gemini的免费API因为google的cors限制，这里无法直接使用，请自建中转服务或使用ohmygpt。
        <br>

        <!-- <br>Google Gemini 免费好用无敌 ,但得自己搭建<a href="https://aistudio.google.com/app/apikey" target="_blank">https://aistudio.google.com/app/apikey</a>
        <br>DeepSeek 便宜效果不赖:<a href="https://platform.deepseek.com/api_keys" target="_blank">https://platform.deepseek.com/api_keys</a>
        <br>base_url:  https://api.deepseek.com/chat/completions
        <br>model:  deepseek-chat     -->

      </span>
    </div>
</div>








    </div>

    <!-- 语言检测设置 -->
    <div id="panel-api-language-detection" class="hidden">
      <h2 data-i18n="apiLanguageDetectionSettings">语言检测设置</h2>

      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <div class="setting-item" style="margin-bottom: 10px;" id="aiLanguageDetectionPrompt-container">
          <label for="aiLanguageDetectionPrompt" style="display: block; margin-bottom: 5px;" data-i18n="languageDetectionPrompt">
            语言检测AI提示词:
          </label>
          <textarea id="aiLanguageDetectionPrompt" data-auto-save="true" data-storage-key="aiLanguageDetectionPrompt" data-storage-area="aiConfig" style="width: 100%; box-sizing: border-box;"></textarea>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          <button id="restore-aiLanguageDetectionPrompt" style="margin-top: 5px; padding: 3px 8px; font-size: 12px;" data-i18n="restoreDefault">恢复默认</button>
        </div>
      </div>

      <!-- 添加多语言提示框 -->
      <div class="multilingual-note">
        <div class="note-title" data-i18n="noteImportant">重要提示</div>
        <div class="note-content">
          <span class="lang-tag lang-en">EN</span>
          <span class="lang-tag lang-en">EN</span>
          <span>Purpose: Mark the language of the word.
          <br>Available parameters: {sentence}, {word}
          <br>Example: Please determine the language used for the word '{word}' in the sentence '{sentence}'. Return only the ISO 639-1 language code standard (e.g., en, de, fr, etc.).
          </span>
           </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-zh">中</span>
          <span>目的：标记单词所属语言
          <br>可用参数：{sentence}, {word}
          <br>示例：请请判断以下句子中单词 '{word}' 在句子'{sentence}'中所使用的语言，仅返回ISO 639-1国际标准化组织ISO 639语言代码标准(如en, de, fr等)
          </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-ja">日</span>
          <span class="lang-tag lang-ja">日</span>
          <span>目的：単語が属する言語をマークする
          <br>利用可能なパラメータ：{sentence}, {word}
          <br>例：文 '{sentence}' 中の単語 '{word}' が使用されている言語を判断してください。ISO 639-1言語コード標準（例：en, de, frなど）のみを返してください。
          </span>
        </div>

        <img src="./images/language_detecter.png" alt="language_detecter" style="width: auto; height: auto;">
      </div>
    </div>

    <!-- 词性标签设置 -->
    <div id="panel-api-tag-analysis" class="hidden">
      <h2 data-i18n="apiTagAnalysisSettings">词性标签设置</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <div class="setting-item" style="margin-bottom: 10px;" id="aiTagAnalysisPrompt-container">
          <label for="aiTagAnalysisPrompt" style="display: block; margin-bottom: 5px;" data-i18n="tagAnalysisPrompt">
            词性标签分析提示词:
          </label>
          <textarea id="aiTagAnalysisPrompt"
            data-auto-save="true"
            data-storage-key="aiTagAnalysisPrompt"
            data-storage-area="aiConfig"
            style="width: 100%; box-sizing: border-box;"></textarea>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          <button id="restore-aiTagAnalysisPrompt" style="margin-top: 5px; padding: 3px 8px; font-size: 12px;" data-i18n="restoreDefault">恢复默认</button>
        </div>
      </div>

      <!-- 添加多语言提示框 -->
      <div class="multilingual-note">
        <div class="note-title" data-i18n="noteImportant">重要提示</div>
        <div class="note-content">
          <span class="lang-tag lang-en">EN</span>
          <span>Purpose: Have AI return certain attributes of the word, such as singular/plural forms in English, gender/number/case in German, masculine/feminine in French, etc. Of course, you can customize the AI to return other attributes as needed.
          <br>Available parameters: {sentence}, {word}
          <br>Example:
          <br>You will analyze certain information about a word in a sentence according to the following requirements, to be used as tags for the word:
          <br> 1. Part of speech(pos): The part of speech in the sentence
          <br> 2. Gender(gender): If it's a noun, return der/die/das
          <br> 3. Plural form(plural): If it's a noun, return its plural form
          <br> 4. Conjugation(conjugation): If it's a verb, return its infinitive form
          <br> 5. Additional info 1(custom key): Any other important information, but not including meaning; please customize the key, such as kana and romaji for Japanese, pinyin for Chinese, etc.
          <br> 6. Additional info 2(custom key): Any other important information, but not including meaning; please customize the key, such as kana and romaji for Japanese, pinyin for Chinese, etc.
          <br> 7. ...
          <br> ...
          <br> Examples:
          <br> German: {"pos":"n", "gender":"der", "plural":"Häuser", "conjugation":"gehen"}
          <br> English: {"pos":"n", "plural":"houses", "conjugation":"null"}
          <br> Japanese: {"pos":"n", "gender":"null", "plural":"null", "conjugation":"null", "kana":"いえ、うち","romaji":"ie,uchi"}
          <br> Chinese: {"pos":"n", "gender":"null", "plural":"null", "conjugation":"null", "pinyin":"fáng zi"}
          <br> After analysis, the word "{word}" in the sentence "{sentence}" belongs to the {language} language. Please analyze the word "{word}" in the sentence "{sentence}". Return in JSON format, including:
          <br> Return JSON only, no explanation, no markdown code block tags.
          </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-zh">中</span>
          <span>目的：让AI返回该单词的一些属性，比如英语的单复数，德语的性数格，法语的阴阳性，等等。当然，你也可以根据需要，让AI返回其他属性。
          <br>可用参数：{sentence}, {word}
          <br>示例：
          <br>你将要按照下列要求，分析单词在句子中的一些信息，用作某单词的tag，请按照下列要求进行分析：
          <br> 1. 词性(pos): 在句子中的词性
          <br> 2. 性别(gender): 如果是名词，返回 der/die/das
          <br> 3. 复数形式(plural): 如果是名词，返回其复数形式
          <br> 4. 变位(conjugation): 如果是动词，返回其原形
          <br> 5. 附加信息1(自定义key): 任何其他重要信息，请自行判断添加，可参考示例。
          <br> 6. 附加信息2(自定义key): 任何其他重要信息，请自行判断添加，可参考示例。
          <br> 7. ...
          <br> ...
          <br> 示例：
          <br> 德语：{"pos":"n", "gender":"der", "plural":"Häuser", "conjugation":"gehen"}
          <br> 英语：{"pos":"n", "plural":"houses", "conjugation":"null"}
          <br> 日语：{"pos":"n", "gender":"null", "plural":"null", "conjugation":"null", "注音":"いえ、うち","罗马音":"ie,uchi"}
          <br> 中文：{"pos":"n", "gender":"null", "plural":"null", "conjugation":"null", "pinyin":"fáng zi"}
          <br> 经分析，句子"{sentence}"中的单词"{word}"属于{language}语言，请分析句子"{sentence}"中的单词"{word}"。返回JSON格式，包含：
          <br> 仅返回JSON，无需解释，不要加markdown代码块标记，注意不同语言，非日语不要返回注意和罗马音和拼音。
        </div>
        <div class="note-content">
          <span class="lang-tag lang-ja">日</span>
          <span>目的：AIに単語の特定の属性を返させる。例えば、英語の単数/複数形、ドイツ語の性・数・格、フランス語の男性/女性など。もちろん、必要に応じて他の属性を返すようにAIをカスタマイズすることもできます。
          <br>利用可能なパラメータ：{sentence}, {word}
          <br>例：
          <br>以下の要件に従って、文中の単語に関する特定の情報を分析し、その単語のタグとして使用します：
          <br> 1. 品詞(pos)：文中での品詞
          <br> 2. 性別(gender)：名詞の場合、der/die/dasを返す
          <br> 3. 複数形(plural)：名詞の場合、その複数形を返す
          <br> 4. 活用(conjugation)：動詞の場合、その原形を返す
          <br> 5. 追加情報1(カスタムキー)：その他の重要な情報（意味を含まない）；日本語のかなやローマ字、中国語のピンインなど、キーをカスタマイズしてください
          <br> 6. 追加情報2(カスタムキー)：その他の重要な情報（意味を含まない）；日本語のかなやローマ字、中国語のピンインなど、キーをカスタマイズしてください
          <br> 7. ...
          <br> ...
          <br> 例：
          <br> ドイツ語：{"pos":"n", "gender":"der", "plural":"Häuser", "conjugation":"gehen"}
          <br> 英語：{"pos":"n", "plural":"houses", "conjugation":"null"}
          <br> 日本語：{"pos":"n", "gender":"null", "plural":"null", "conjugation":"null", "かな":"いえ、うち","ローマ字":"ie,uchi"}
          <br> 中国語：{"pos":"n", "gender":"null", "plural":"null", "conjugation":"null", "pinyin":"fáng zi"}
          <br> 分析の結果、文"{sentence}"中の単語"{word}"は{language}言語に属します。文"{sentence}"中の単語"{word}"を分析してください。JSON形式で返してください：
          <br> JSONのみを返し、説明や、markdownコードブロックタグは不要です。
        </div>

        <img src="./images/tag_detecter.png" alt="language_detecter" style="width: auto; height: auto;">
      </div>
    </div>

    <!-- 单词解释设置 -->
    <div id="panel-api-word-explanation" class="hidden">
      <h2 data-i18n="apiWordExplanationSettings">单词解释设置</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <div class="setting-item" style="margin-bottom: 10px;" id="aiPrompt-container">
          <label for="aiPrompt" style="display: block; margin-bottom: 5px;" data-i18n="wordExplanationPrompt">单词解释AI提示词:</label>
          <textarea id="aiPrompt" data-auto-save="true" data-storage-key="aiPrompt" data-storage-area="aiConfig" style="width: 100%; box-sizing: border-box;"></textarea>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          <button id="restore-aiPrompt" style="margin-top: 5px; padding: 3px 8px; font-size: 12px;" data-i18n="restoreDefault">恢复默认</button>
        </div>
      </div>


        <!-- 添加多语言提示框 -->
        <div class="multilingual-note">
          <div class="note-title" data-i18n="noteImportant">重要提示</div>
          <div class="note-content">
            <span class="lang-tag lang-en">EN</span>
            <span>Purpose: Analyze words in context, can be simple or detailed
            <br>Available parameters: {sentence}, {word}
            <br>Example:
            <br>---word and sentence---
            <br>sentence: {sentence}
            <br>word: {word}
            <br>---translation requirements---
            <br>Only return the exact meaning of the word in the sentence (possibly with a衍生意).
            <br>---return format requirements---
            <br>If the word is part of a phrase or other usage, use the style "word: translation", for example: "auf das Konto gehen" : blamed, counted on..., originated from   ...;
            <br>If the word is not part of a phrase or other usage, use the style "translation", for example: "Account"
          </span>
          </div>
          <div class="note-content">
            <span class="lang-tag lang-zh">中</span>
            <span>目的：析词于句，可繁可简
            <br>可用参数：{sentence}, {word}
            <br>示例：
            <br>---单词和句子---
            <br>句子：{sentence}
            <br>单词：{word}
            <br>---翻译要求---
            <br>要求仅返回句子在单词中的确切含义（可能有引申意），无需进行分析。
            <br>---返回格式要求---
            <br>如果单词是某个短语或其他用法中的一部分，请使用“单词：翻译”的样式，比如：“ "auf das Konto gehen" ：归咎于，算在...头上，源于...”；
            <br>如果单词并不是某短语或者语法的一部分，请使用“翻译”的样式，不要“单词： ”这样的前缀，避免内容冗余。比如：“账户，账号”。

          </span>
          </div>
          <div class="note-content">
            <span class="lang-tag lang-ja">日</span>
            <span>目的：文脈の中で単語を分析し、簡潔または詳細に説明する
            <br>利用可能なパラメータ：{sentence}, {word}
            <br>例：
            <br>---単語と文---
            <br>文：{sentence}
            <br>単語：{word}
            <br>---翻訳要件---
            <br>単語の意味を文脈の中で分析し、簡潔または詳細に説明してください。
            <br>---返却要件---
            <br>短語や他の用法の中にある場合、"word: translation"の形式を使用してください。例："auf das Konto gehen" : 責任を負う, 数える, 起源は...;
            <br>短語や他の用法の中にない場合、"translation"の形式を使用してください。例： "Konto" : 口座, アカウント
          
          
          
          </span>
          </div>

          <img src="./images/tanslate.png" alt="language_detecter" style="width: auto; height: auto;">
        </div>


    </div>

    <!-- 第二个单词解释设置 -->
    <div id="panel-api-word-explanation-2" class="hidden">
      <h2 data-i18n="apiWordExplanation2Settings">could be turned off in popup settings (弹窗设置内可关闭)</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <div class="setting-item" style="margin-bottom: 10px;" id="aiPrompt2-container">
          <label for="aiPrompt2" style="display: block; margin-bottom: 5px;" data-i18n="wordExplanation2Prompt">第二个单词解释AI提示词:</label>
          <textarea id="aiPrompt2" data-auto-save="true" data-storage-key="aiPrompt2" data-storage-area="aiConfig" style="width: 100%; box-sizing: border-box;"></textarea>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          <button id="restore-aiPrompt2" style="margin-top: 5px; padding: 3px 8px; font-size: 12px;" data-i18n="restoreDefault">恢复默认</button>
        </div>
      </div>


        <!-- 添加多语言提示框 -->
        <div class="multilingual-note">
          <div class="note-title" data-i18n="noteImportant">重要提示</div>
          <div class="note-content">
            <span class="lang-tag lang-en">EN</span>
            <span>Purpose: Second AI interpretation for alternative analysis
            <br>Available parameters: {sentence}, {word}
            <br>Example: Same format as first AI interpretation
          </span>
          </div>
          <div class="note-content">
            <span class="lang-tag lang-zh">中</span>
            <span>目的：第二个AI释义，可用来AI解析
            <br>可用参数：{sentence}, {word}
            <br>示例：与第一个AI释义格式相同

          </span>
          </div>
          <div class="note-content">
            <span class="lang-tag lang-ja">日</span>
            <span>目的：第二のAI解釈、異なる視点からの分析を提供
            <br>利用可能なパラメータ：{sentence}, {word}
            <br>例：第一のAI解釈と同じ形式



          </span>
          </div>

          <img src="./images/tanslate.png" alt="language_detecter" style="width: auto; height: auto;">
        </div>


    </div>

    <!-- 例句翻译设置 -->
    <div id="panel-api-sentence-translation" class="hidden">
      <h2 data-i18n="apiSentenceTranslationSettings">例句翻译设置</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <div class="setting-item" style="margin-bottom: 10px;" id="aiSentenceTranslationPrompt-container">
          <label for="aiSentenceTranslationPrompt" style="display: block; margin-bottom: 5px;" data-i18n="sentenceTranslationPrompt">
            例句翻译AI提示词:
          </label>
          <textarea id="aiSentenceTranslationPrompt" data-auto-save="true" data-storage-key="aiSentenceTranslationPrompt" data-storage-area="aiConfig" style="width: 100%; box-sizing: border-box;"></textarea>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          <button id="restore-aiSentenceTranslationPrompt" style="margin-top: 5px; padding: 3px 8px; font-size: 12px;" data-i18n="restoreDefault">恢复默认</button>
        </div>
      </div>

      <!-- 添加多语言提示框 -->
      <div class="multilingual-note">
        <div class="note-title" data-i18n="noteImportant">重要提示</div>
        <div class="note-content">
          <span class="lang-tag lang-en">EN</span>
          <span>Purpose: Sentence translation
          <br>Available parameters: {sentence}, {word}, with Markdown bold formatting
          <br>Example: Please translate the sentence: '{sentence}' into English, and highlight the part corresponding to the word '{word}' using Markdown bold formatting. Only return the translation result, without additional explanation.
          </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-zh">中</span>
          <span>目的：例句翻译
          <br>可用参数：{sentence}, {word}，Markdown加粗显示
          <br>示例：请将句子: '{sentence}'翻译为中文，并将句子中单词"'{word}'"对应的中文的部分用Markdown加粗显示。只返回翻译结果，不要额外说明。
          </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-ja">日</span>
          <span>目的：文章の翻訳
          <br>利用可能なパラメータ：{sentence}, {word}、Markdownの太字表示
          <br>例：文章：'{sentence}'を日本語に翻訳し、単語'{word}'に対応する日本語の部分をMarkdownの太字で表示してください。翻訳結果のみを返し、追加の説明は不要です。
          </span>
        </div>

        <img src="./images/sentense_trans.png" alt="language_detecter" style="width: auto; height: auto;">
      </div>











    </div>

    <!-- 句子解析设置 -->
    <div id="panel-api-analysis" class="hidden">
      <h2 data-i18n="apiAnalysisSettings">句子解析设置</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <div class="setting-item" style="margin-bottom: 10px;" id="aiAnalysisPrompt-container">
          <label for="aiAnalysisPrompt" style="display: block; margin-bottom: 5px;" data-i18n="sentenceAnalysisPrompt">
            句子解析AI提示词:
          </label>
          <textarea id="aiAnalysisPrompt" data-auto-save="true" data-storage-key="aiAnalysisPrompt" data-storage-area="aiConfig" style="width: 100%; box-sizing: border-box;"></textarea>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          <button id="restore-aiAnalysisPrompt" style="margin-top: 5px; padding: 3px 8px; font-size: 12px;" data-i18n="restoreDefault">恢复默认</button>
        </div>
      </div>


       <!-- 添加多语言提示框 -->
       <div class="multilingual-note">
        <div class="note-title" data-i18n="noteImportant">重要提示</div>
        <div class="note-content">
          <span class="lang-tag lang-en">EN</span>
          <span>Purpose: Sentence analysis
          <br>Available parameters: {sentence}, {word}
          <br>Example: Please analyze the sentence '{sentence}' with focus on the word '{word}'. Include grammatical structure, word function in the sentence, and any idiomatic usage. Format your response with clear headings and use Markdown for emphasis.
          </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-zh">中</span>
          <span>目的：句子解析
          <br>可用参数：{sentence}, {word}
          <br>示例：直译： 我敬畏地观察着两位可怕的战士一次又一次地交叉他们的剑。 解析： 1.- Ich beobachte ehrfürchtig: "我敬畏地观察"。   - Ich: "我"，主语。   - beobachte: "观察"，动词"beobachten"的第一人称单数形式。   - ehrfürchtig: "敬畏地"，副词，表示对某事物的尊敬或畏惧。 2.- wie die beiden furchterregenden Krieger immer wieder ihre Klingen kreuzen: "两位可怕的战士一次又一次地交叉他们的剑"。   - wie: "如何"，引导方式状语从句。   - die beiden furchterregenden Krieger: "这两位可怕的战士"。     - die beiden: "这两位"，指示代词。     - furchterregenden: "可怕的"，形容词，表示"令人恐惧"。     - Krieger: "战士"，名词，指战斗者。   - immer wieder: "一次又一次"，副词短语，表示重复发生。   - ihre Klingen kreuzen: "交叉他们的剑"。      - ihre: "他们的"，物主代词。     - Klingen: "剑"，名词，表示剑或刀刃。     - kreuzen: "交叉"，动词，表示交叉或交锋。 借鉴上面解析格式，用中文解析下列英语/德语等其他语言的句子: {sentence}
          </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-ja">日</span>
          <span>目的：文の解析
          <br>利用可能なパラメータ：{sentence}, {word}
          <br>例：文'{sentence}'を解析し、単語'{word}'に焦点を当ててください。文法構造、文中での単語の機能、慣用的な使い方などを含めてください。見出しを明確にし、強調にはMarkdownを使用してフォーマットしてください。
          </span>
        </div>

        <img src="./images/e_poptip.png" alt="language_detecter" style="width: auto; height: auto;">
      </div>

















    </div>

    <!-- 侧边栏解析设置 -->
    <div id="panel-api-sidebar" class="hidden">
      <h2 data-i18n="apiSidebarSettings">侧边栏解析设置</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <div class="setting-item" style="margin-bottom: 10px;" id="sidebarAIPrompt-container">
          <label for="sidebarAIPrompt" style="display: block; margin-bottom: 5px;" data-i18n="sidebarAnalysisPrompt">
            侧边栏AI解析提示词:
          </label>
          <textarea id="sidebarAIPrompt" data-auto-save="true" data-storage-key="sidebarAIPrompt" data-storage-area="aiConfig"  style="width: 100%; box-sizing: border-box;"></textarea>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          <button id="restore-sidebarAIPrompt" style="margin-top: 5px; padding: 3px 8px; font-size: 12px;" data-i18n="restoreDefault">恢复默认</button>
        </div>
      </div>


        <!-- 添加多语言提示框 -->
        <div class="multilingual-note">
          <div class="note-title" data-i18n="noteImportant">重要提示</div>
          <div class="note-content">
            <span class="lang-tag lang-en">EN</span>
            <span>Purpose: Sentence analysis
            <br>Available parameters: {sentence}, {word}
            <br>Example: Please analyze the sentence '{sentence}' with focus on the word '{word}'. Include grammatical structure, word function in the sentence, and any idiomatic usage. Format your response with clear headings and use Markdown for emphasis.
            </span>
          </div>
          <div class="note-content">
            <span class="lang-tag lang-zh">中</span>
            <span>目的：句子解析
            <br>可用参数：{sentence}, {word}
            <br>示例：直译： 我敬畏地观察着两位可怕的战士一次又一次地交叉他们的剑。 解析： 1.- Ich beobachte ehrfürchtig: "我敬畏地观察"。   - Ich: "我"，主语。   - beobachte: "观察"，动词"beobachten"的第一人称单数形式。   - ehrfürchtig: "敬畏地"，副词，表示对某事物的尊敬或畏惧。 2.- wie die beiden furchterregenden Krieger immer wieder ihre Klingen kreuzen: "两位可怕的战士一次又一次地交叉他们的剑"。   - wie: "如何"，引导方式状语从句。   - die beiden furchterregenden Krieger: "这两位可怕的战士"。     - die beiden: "这两位"，指示代词。     - furchterregenden: "可怕的"，形容词，表示"令人恐惧"。     - Krieger: "战士"，名词，指战斗者。   - immer wieder: "一次又一次"，副词短语，表示重复发生。   - ihre Klingen kreuzen: "交叉他们的剑"。      - ihre: "他们的"，物主代词。     - Klingen: "剑"，名词，表示剑或刀刃。     - kreuzen: "交叉"，动词，表示交叉或交锋。 借鉴上面解析格式，用中文解析下列英语/德语等其他语言的句子: {sentence}
            </span>
          </div>
          <div class="note-content">
            <span class="lang-tag lang-ja">日</span>
            <span>目的：文の解析
            <br>利用可能なパラメータ：{sentence}, {word}
            <br>例：文'{sentence}'を解析し、単語'{word}'に焦点を当ててください。文法構造、文中での単語の機能、慣用的な使い方などを含めてください。見出しを明確にし、強調にはMarkdownを使用してフォーマットしてください。
            </span>
          </div>

          <img src="./images/side_analisert.png" alt="language_detecter" style="width: auto; height: auto;">
        </div>

    </div>

    <!-- 新增: YouTube字幕处理设置 -->
    <div id="panel-api-youtube-caption" class="hidden">
      <h2 data-i18n="apiYoutubeCaptionSettings">YouTube字幕处理设置</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <div class="setting-item" style="margin-bottom: 10px;" id="aiYoutubeCaptionPrompt-container">
          <label for="aiYoutubeCaptionPrompt" style="display: block; margin-bottom: 5px;" data-i18n="youtubeCaptionPrompt">
            YouTube字幕处理AI提示词:
          </label>
          <textarea id="aiYoutubeCaptionPrompt"
            data-auto-save="true"
            data-storage-key="aiYoutubeCaptionPrompt"
            data-storage-area="aiConfig"
            style="width: 100%; box-sizing: border-box;"></textarea>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
          <button id="restore-aiYoutubeCaptionPrompt" style="margin-top: 5px; padding: 3px 8px; font-size: 12px;" data-i18n="restoreDefault">恢复默认</button>
        </div>
      </div>

      <!-- 添加多语言提示框 -->
      <div class="multilingual-note">
        <div class="note-title" data-i18n="noteImportant">重要提示</div>
        <div class="note-content">
          <span class="lang-tag lang-en">EN</span>
          <span>Purpose: Add appropriate punctuation to YouTube subtitles.
          <br>Available parameters: {text}
          <br>Example: You will add appropriate punctuation to the YouTube subtitles according to the following requirements. 1. Each comma segment should not be too long or too short, matching natural speech pauses. For example, in German, commas can be added after 'und', 'oder', 'aber', etc., in long sentences for pauses. 2. Do not add or modify any words. 3. Only add punctuation marks like commas, periods, question marks, etc. 4. The beginning and ending sentences might be truncated parts of other sentences; punctuation may be omitted accordingly. 5. Do not add any explanations or notes; return only the punctuated text. 6. If the text is Japanese, keep the original spaces and do not add line breaks. Please process the following text: {text}
          </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-zh">中</span>
          <span>目的：为YouTube字幕添加适当的标点符号。
          <br>可用参数：{text}
          <br>示例：你将按照以下要求，为Youtube字幕添加适当的标点符号。 1.每个逗号小段不要过长或者过短，要和正常的说话停顿相匹配，比如德语里的und,oder,aber,等等在很长的句子历史可以用逗号添加一个作为停顿的 2.但不要添加或修改任何单词。 3.仅添加标点符号，如逗号、句号、问号等。 4.开始和结果的句子可能是其他句子的截断，可以酌情不添加标点符号。 5.不要添加任何解释或者备注,直接返回带标点的文本。 6.如果文本是日文，请保留原文中的空格，且不要换行。 请处理以下文本：{text}
          </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-ja">日</span>
          <span>目的：YouTubeの字幕に適切な句読点を追加する。
          <br>利用可能なパラメータ：{text}
          <br>例：以下の要件に従って、YouTubeの字幕に適切な句読点を追加します。 1. 各コンマ区切りは長すぎたり短すぎたりせず、自然な会話の間と一致させる必要があります。例えば、ドイツ語では長い文中の 'und', 'oder', 'aber' などの後にコンマを追加して間を置くことができます。 2. 単語を追加したり変更したりしないでください。 3. コンマ、ピリオド、疑問符などの句読点のみを追加してください。 4. 開始と終了の文は他の文の切り捨てられた部分である可能性があるため、状況に応じて句読点を省略できます。 5. 説明や注釈を追加せず、句読点付きのテキストのみを返してください。 6. テキストが日本語の場合は、元のスペースを保持し、改行しないでください。 次のテキストを処理してください：{text}
          </span>
        </div>
        <!-- 可以考虑添加一个相关的图片 -->
        <!-- <img src="./images/youtube_caption.png" alt="youtube_caption_example" style="width: auto; height: auto;"> -->
      </div>
    </div>





    <!-- TTS 基本设置面板 -->
    <div id="panel-tts-basic" class="hidden">
      <h2 data-i18n="ttsBasicSettings">TTS 基本设置</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <!-- 修改TTS渠道选择部分 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <label for="wordTTSProvider" style="display: block; margin-bottom: 5px;" data-i18n="wordTtsChannel" data-i18n-suffix=":">单词发音渠道:</label>
          <select id="wordTTSProvider" style="width: 100%; padding: 8px;">
            <option value="local" data-i18n="localTts">本地TTS</option>
            <option value="edge" data-i18n="edgeTts">Edge TTS</option>
            <option value="custom" data-i18n="customUrl">自定义URL1</option>
            <option value="custom2">自定义URL2</option>
            <option value="minimaxi">Minimaxi TTS</option>
          </select>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <div class="setting-item" style="margin-bottom: 15px;">
          <label for="sentenceTTSProvider" style="display: block; margin-bottom: 5px;" data-i18n="sentenceTtsChannel" data-i18n-suffix=":">句子发音渠道:</label>
          <select id="sentenceTTSProvider" style="width: 100%; padding: 8px;">
            <option value="local" data-i18n="localTts">本地TTS</option>
            <option value="edge" data-i18n="edgeTts">Edge TTS</option>
            <option value="minimaxi">Minimaxi TTS</option>
            <option value="custom" data-i18n="customUrl">自定义URL1</option>
            <option value="custom2">自定义URL2</option>
          </select>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

         <!-- 开关设置 -->
         <div class="setting-item" style="margin-bottom: 20px;">
          <label class="switch-label" style="display: flex; align-items: center; margin-bottom: 10px; cursor: pointer;">
            <input type="checkbox" id="enableWordTTS" style="margin-right: 10px;">
            <span data-i18n="enableWordTts">启用单词TTS</span>
          </label>

          <label class="switch-label" style="display: flex; align-items: center; cursor: pointer;">
            <input type="checkbox" id="enableSentenceTTS" style="margin-right: 10px;">
            <span data-i18n="enableSentenceTts">启用句子TTS</span>
          </label>
        </div>
      </div>
    </div>

    <!-- 本地TTS配置面板 -->
    <div id="panel-tts-local" class="hidden">
      <h2 data-i18n="localTtsConfig">本地TTS配置</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <div class="setting-item" style="margin-bottom: 15px;">
          <label for="localTTSVoice" style="display: block; margin-bottom: 5px;" data-i18n="defaultVoice" data-i18n-suffix=":">默认语音:</label>
          <select id="localTTSVoice" style="width: 100%; padding: 8px;">
            <!-- 语音列表将通过JavaScript动态填充 -->
          </select>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <div class="setting-item" style="margin-bottom: 15px;">
          <label for="localTTSRate" style="display: block; margin-bottom: 5px;" data-i18n="speechRate" data-i18n-suffix=":">语速 (0.1-2.0):</label>
          <input type="range" id="localTTSRate" min="0.1" max="2.0" step="0.1" value="1.0" style="width: 100%;">
          <span id="localTTSRateValue" style="display: block; text-align: center;">1.0</span>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <div class="setting-item" style="margin-bottom: 15px;">
          <label for="localTTSPitch" style="display: block; margin-bottom: 5px;" data-i18n="pitch" data-i18n-suffix=":">音调 (0.1-2.0):</label>
          <input type="range" id="localTTSPitch" min="0.1" max="2.0" step="0.1" value="1.0" style="width: 100%;">
          <span id="localTTSPitchValue" style="display: block; text-align: center;">1.0</span>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <div class="setting-item" style="margin-bottom: 15px;">
          <button id="testLocalTTS" style="padding: 8px 16px;" data-i18n="testLocalTts">测试本地TTS</button>
        </div>
      </div>
    </div>

    <!-- Minimaxi TTS配置面板 -->
    <div id="panel-tts-minimaxi" class="hidden">
      <h2 data-i18n="minimaxiTtsConfig">Minimaxi TTS配置</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <!-- 添加一个baseURL -->

        <div class="setting-item" style="margin-bottom: 10px;">
          <label for="minimaxiBaseURL" style="display: block; margin-bottom: 5px;" data-i18n="minimaxiBaseURL">Base URL:    "https://api.minimax.chat/v1/t2a_v2?GroupId="  ||||||||||  "https://api.minimaxi.chat/v1/t2a_v2?GroupId="   </label>
          <input type="text" id="minimaxiBaseURL" data-auto-save="true" data-storage-key="minimaxiBaseURL" data-storage-area="aiConfig" placeholder="请输入 minimaxiBaseURL" style="width: 100%; padding: 8px;">
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>


        <div class="setting-item" style="margin-bottom: 10px;">
          <label for="minimaxiGroupId" style="display: block; margin-bottom: 5px;" data-i18n="groupId">Group ID:</label>
          <input type="text" id="minimaxiGroupId" data-auto-save="true" data-storage-key="minimaxiGroupId" data-storage-area="aiConfig" placeholder="请输入 Group ID" style="width: 100%; padding: 8px;">
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>
        <div class="setting-item" style="margin-bottom: 10px;">
          <label for="minimaxiApiKey" style="display: block; margin-bottom: 5px;" data-i18n="apiKey">API Key:</label>
          <input type="text" id="minimaxiApiKey" data-auto-save="true" data-storage-key="minimaxiApiKey" data-storage-area="aiConfig" placeholder="请输入 API Key" style="width: 100%; padding: 8px;">
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>
<!-- 在Minimaxi TTS配置面板中的API Key输入框之后添加 -->
<div class="setting-item" style="margin-bottom: 10px;">
  <label for="minimaxiVoiceId" style="display: block; margin-bottom: 5px;" data-i18n="voiceId">声音ID:</label>
  <input type="text" id="minimaxiVoiceId" data-auto-save="true" data-storage-key="minimaxiVoiceId" data-storage-area="aiConfig" placeholder="请输入声音ID" style="width: 100%; padding: 8px;">
  <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
</div>

<div class="setting-item" style="margin-bottom: 10px;">
  <label for="minimaxiModel" style="display: block; margin-bottom: 5px;" data-i18n="model">模型:speech-01-turbo、speech-01-240228、speech-01-turbo-240228、speech-01-hd</label>
  <input type="text" id="minimaxiModel" data-auto-save="true" data-storage-key="minimaxiModel" data-storage-area="aiConfig" placeholder="请输入模型名称" style="width: 100%; padding: 8px;">
  <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
</div>

<div class="setting-item" style="margin-bottom: 10px;">
  <label for="minimaxiSpeed" style="display: block; margin-bottom: 5px;" data-i18n="speed">语速:</label>
  <input type="number" id="minimaxiSpeed" data-auto-save="true" data-storage-key="minimaxiSpeed" data-storage-area="aiConfig" placeholder="请输入语速" style="width: 100%; padding: 8px;" step="0.1" min="0.5" max="2.0">
  <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
</div>



        <!-- https://lingkuma.notion.site/Minimaxi-TTS-List-1b699894aa168022bae1e39d77b10c9c?pvs=4 -->



        <!-- 可以添加测试按钮 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <button id="testMinimaxi" style="padding: 8px 16px;" data-i18n="testMinimaxi">测试Minimaxi</button>
        </div>




 <!-- 添加多语言提示框 -->
 <div class="multilingual-note">
  <div class="note-title" data-i18n="noteImportant">重要提示</div>
  <div class="note-content">
    <span class="lang-tag lang-en">EN</span>
    <span>
      <br> Minimax TTS (supported): <a href="https://www.minimax.io/platform/user-center/basic-information" target="_blank">officail page</a>
      <br> 

    </span>
  </div>
  <div class="note-content">
    <span class="lang-tag lang-zh">中</span>
    <span>
       <br>海螺TTS 已接入： <a href="https://platform.minimaxi.com/user-center/basic-information" target="_blank">官网</a>
       <br>

       <br>
    </span>
  </div>
</div>



      </div>
    </div>

    <!-- Edge TTS配置面板 -->
    <div id="panel-tts-edge" class="hidden">
      <h2 data-i18n="edgeTtsConfig">Edge TTS配置</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <!-- 自动/手动选择声音的开关 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <label class="switch-label" style="display: flex; align-items: center; cursor: pointer;">
            <input type="checkbox" id="edgeTTSAutoVoice" style="margin-right: 10px;">
            <span data-i18n="edgeTtsAutoVoice">自动选择声音（根据语言）</span>
          </label>
        </div>

        <!-- 手动选择声音的下拉菜单 -->
        <div class="setting-item" style="margin-bottom: 15px;" id="edgeTTSVoiceContainer">
          <label for="edgeTTSVoice" style="display: block; margin-bottom: 5px;" data-i18n="edgeTtsVoice" data-i18n-suffix=":">选择声音:</label>
          <select id="edgeTTSVoice" style="width: 100%; padding: 8px;">
            <!-- 声音列表将通过JavaScript动态填充 -->
          </select>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <!-- 语速设置 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <label for="edgeTTSRate" style="display: block; margin-bottom: 5px;" data-i18n="edgeTtsRate" data-i18n-suffix=":">语速 (-100% 到 +100%):</label>
          <input type="range" id="edgeTTSRate" min="-100" max="100" step="10" value="0" style="width: 100%;">
          <span id="edgeTTSRateValue" style="display: block; text-align: center;">0%</span>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <!-- 音量设置 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <label for="edgeTTSVolume" style="display: block; margin-bottom: 5px;" data-i18n="edgeTtsVolume" data-i18n-suffix=":">音量 (-100% 到 +100%):</label>
          <input type="range" id="edgeTTSVolume" min="-100" max="100" step="10" value="0" style="width: 100%;">
          <span id="edgeTTSVolumeValue" style="display: block; text-align: center;">0%</span>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <!-- 音调设置 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <label for="edgeTTSPitch" style="display: block; margin-bottom: 5px;" data-i18n="edgeTtsPitch" data-i18n-suffix=":">音调 (-50% 到 +50%):</label>
          <input type="range" id="edgeTTSPitch" min="-50" max="50" step="5" value="0" style="width: 100%;">
          <span id="edgeTTSPitchValue" style="display: block; text-align: center;">0%</span>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <!-- 测试按钮 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <button id="testEdgeTTS" style="padding: 8px 16px;" data-i18n="testEdgeTts">测试Edge TTS</button>
        </div>
      </div>

      <!-- 添加多语言提示框 -->
      <div class="multilingual-note">
        <div class="note-title" data-i18n="noteImportant">重要提示</div>
        <div class="note-content">
          <span class="lang-tag lang-en">EN</span>
          <span>
            <br>Edge TTS uses Microsoft's Edge browser text-to-speech technology.
            <br>When "Auto-select voice" is enabled, the system will automatically choose an appropriate voice based on the language of the text.
            <br>If you prefer a specific voice, disable auto-select and choose your preferred voice from the dropdown menu.
            <br>The voice list includes all available voices from Microsoft Edge TTS.
          </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-zh">中</span>
          <span>
            <br>Edge TTS 使用微软Edge浏览器的文本转语音技术。
            <br>当启用"自动选择声音"时，系统会根据文本的语言自动选择合适的声音。
            <br>如果您偏好特定的声音，请禁用自动选择并从下拉菜单中选择您喜欢的声音。
            <br>声音列表包含Microsoft Edge TTS提供的所有可用声音。
          </span>
        </div>
      </div>
    </div>

    <!-- Edge TTS配置面板 -->
    <div id="panel-tts-edge" class="hidden">
      <h2 data-i18n="edgeTtsConfig">Edge TTS配置</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <!-- 自动/手动选择声音的开关 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <label class="switch-label" style="display: flex; align-items: center; cursor: pointer;">
            <input type="checkbox" id="edgeTTSAutoVoice" style="margin-right: 10px;">
            <span data-i18n="edgeTtsAutoVoice">自动选择声音（根据语言）</span>
          </label>
        </div>

        <!-- 手动选择声音的下拉菜单 -->
        <div class="setting-item" style="margin-bottom: 15px;" id="edgeTTSVoiceContainer">
          <label for="edgeTTSVoice" style="display: block; margin-bottom: 5px;" data-i18n="edgeTtsVoice" data-i18n-suffix=":">选择声音:</label>
          <select id="edgeTTSVoice" style="width: 100%; padding: 8px;">
            <!-- 声音列表将通过JavaScript动态填充 -->
          </select>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <!-- 语速设置 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <label for="edgeTTSRate" style="display: block; margin-bottom: 5px;" data-i18n="edgeTtsRate" data-i18n-suffix=":">语速 (-100% 到 +100%):</label>
          <input type="range" id="edgeTTSRate" min="-100" max="100" step="10" value="0" style="width: 100%;">
          <span id="edgeTTSRateValue" style="display: block; text-align: center;">0%</span>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <!-- 音量设置 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <label for="edgeTTSVolume" style="display: block; margin-bottom: 5px;" data-i18n="edgeTtsVolume" data-i18n-suffix=":">音量 (-100% 到 +100%):</label>
          <input type="range" id="edgeTTSVolume" min="-100" max="100" step="10" value="0" style="width: 100%;">
          <span id="edgeTTSVolumeValue" style="display: block; text-align: center;">0%</span>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <!-- 音调设置 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <label for="edgeTTSPitch" style="display: block; margin-bottom: 5px;" data-i18n="edgeTtsPitch" data-i18n-suffix=":">音调 (-50% 到 +50%):</label>
          <input type="range" id="edgeTTSPitch" min="-50" max="50" step="5" value="0" style="width: 100%;">
          <span id="edgeTTSPitchValue" style="display: block; text-align: center;">0%</span>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <!-- 测试按钮 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <button id="testEdgeTTS" style="padding: 8px 16px;" data-i18n="testEdgeTts">测试Edge TTS</button>
        </div>
      </div>

      <!-- 添加多语言提示框 -->
      <div class="multilingual-note">
        <div class="note-title" data-i18n="noteImportant">重要提示</div>
        <div class="note-content">
          <span class="lang-tag lang-en">EN</span>
          <span>
            <br>Edge TTS uses Microsoft's Edge browser text-to-speech technology.
            <br>When "Auto-select voice" is enabled, the system will automatically choose an appropriate voice based on the language of the text.
            <br>If you prefer a specific voice, disable auto-select and choose your preferred voice from the dropdown menu.
            <br>The voice list includes all available voices from Microsoft Edge TTS.
          </span>
        </div>
        <div class="note-content">
          <span class="lang-tag lang-zh">中</span>
          <span>
            <br>Edge TTS 使用微软Edge浏览器的文本转语音技术。
            <br>当启用"自动选择声音"时，系统会根据文本的语言自动选择合适的声音。
            <br>如果您偏好特定的声音，请禁用自动选择并从下拉菜单中选择您喜欢的声音。
            <br>声音列表包含Microsoft Edge TTS提供的所有可用声音。
          </span>
        </div>
      </div>
    </div>

    <!-- 自定义URL配置面板 -->
    <div id="panel-tts-custom" class="hidden">
      <h2 data-i18n="customAudioUrlConfig">自定义音频URL配置</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <div class="setting-item" style="margin-bottom: 10px;">
          <label for="wordAudioUrlTemplate" style="display: block; margin-bottom: 5px;">自定义URL1:</label>
          <textarea
              id="wordAudioUrlTemplate"
              style="width: 100%; padding: 8px;"
              rows="4"
          ></textarea>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <div class="setting-item" style="margin-bottom: 10px;">
          <label for="wordAudioUrlTemplate2" style="display: block; margin-bottom: 5px;">自定义URL2:</label>
          <textarea
              id="wordAudioUrlTemplate2"
              style="width: 100%; padding: 8px;"
              rows="4"
          ></textarea>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>



 <!-- 添加多语言提示框 -->
 <div class="multilingual-note">
  <div class="note-title" data-i18n="noteImportant">重要提示</div>
  <div class="note-content">
    <span class="lang-tag lang-en">EN</span>
    <span>
      URL Template:
      <div>
          <br>Available variables: {lang}, {word}<br>
          <br>Available functions: {encodeURIComponent()}, {utf8ToBase64()}, String concatenation like 「 "text" + {word} 」<br>
          <br>Example 1: Use LunaTranslator's TTS, which supports various services like EdgeTTS.
          <br>Download from: <a href="https://lunatranslator.org/Github/LunaTranslator" target="_blank" rel="noopener noreferrer">https://lunatranslator.org/Github/LunaTranslator</a>
          <br>Start Network Service: <a href="https://docs.lunatranslator.org/en/apiservice.html" target="_blank" rel="noopener noreferrer">https://docs.lunatranslator.org/en/apiservice.html</a>
          <br>Then enter: http://127.0.0.1:2333/api/tts?text={word} to play TTS.
          <br>
          <br>Example 2: Cache Minimax voices locally using a Python server.
          <br>Download from: <a href="https://github.com/lingkuma/minimaxi_tts_cache" target="_blank" rel="noopener noreferrer">https://github.com/lingkuma/minimaxi_tts_cache</a>
          <br>Then enter: http://127.0.0.1:3001/langid={lang}&txt={word} to play TTS.
          <br>
          <br>Example 3: Use public services (These are just examples and might change or require specific formats).
          <br>e.g., https://dict.example1.com/dictvoice?type=2&le={lang}&audio={word}
          <br>e.g., https://api.example2.com/api/v2/speech/speakweb?langid={lang}&txt={encodeURIComponent("Prefix" + utf8ToBase64(word))}
          <br>You can use APIs you host yourself, hosted by others, or other available services.
      </div>
    </span>
  </div>
  <div class="note-content">
    <span class="lang-tag lang-zh">中</span>
    <span>
      URL模板:
      <div>
          <br>可用变量: {lang}, {word}<br>
          <br>可用函数: {encodeURIComponent()}, {utf8ToBase64()},  「  "文本" + {word} 」<br>
          <br>示例1：使用LunaTranslator的TTS，比如edgeTTS等多种TTS服务。
          <br>前往下载：<a href="https://lunatranslator.org/Github/LunaTranslator" target="_blank" rel="noopener noreferrer">https://lunatranslator.org/Github/LunaTranslator</a>
          <br>开启网络服务后: <a href="https://docs.lunatranslator.org/zh/apiservice.html" target="_blank" rel="noopener noreferrer">https://docs.lunatranslator.org/zh/apiservice.html</a>
          <br>然后输入 http://127.0.0.1:2333/api/tts?text={word} 即可播放TTS
          <br>
          <br>示例2: 缓存Miximax的声音到本地，用python搭建服务器
          <br>前往下载: <a href="https://github.com/lingkuma/minimaxi_tts_cache" target="_blank" rel="noopener noreferrer">https://github.com/lingkuma/minimaxi_tts_cache</a>
          <br>然后输入 http://127.0.0.1:3001/langid={lang}&txt={word} 即可播放TTS
          <br>
          <br>示例3: 使用公开的服务
          <br>比如 https://dict.示例1.com/dictvoice?type=2&le={lang}&audio={word}
          <br>比如 https://api.示例2.com/api/v2/speech/speakweb?langid={lang}&txt={encodeURIComponent("Prefix" + utf8ToBase64(word))}

      </div>
    </span>
  </div>
  <!-- <div class="note-content">
    <span class="lang-tag lang-ja">日</span>
    <span>
      URLテンプレート:
      <div>
          <br>利用可能な変数: {lang}, {word}<br>
          <br>利用可能な関数: {encodeURIComponent()}, {utf8ToBase64()} 「  "文" + utf8ToBase64(word)  」<br>
          <br>例1: https://dict.オク辞典.com/dictvoice?type=2&le={lang}&audio={word}
          <br>例2: https://api.音声サービス.com/api/v2/speech/speakweb?langid={lang}&txt={encodeURIComponent("Prefix" + utf8ToBase64(word))}
          <br>自分でホストするか、他人がホストするか、他のサービスのmp3音声を返すAPIを使用できます。
      </div>
    </span>
  </div> -->
</div>


        <!-- 可以添加测试按钮 -->
        <div class="setting-item" style="margin-bottom: 15px;">
          <button id="testCustomUrl" style="padding: 8px 16px; margin-right: 10px;" data-i18n="testCustomUrl">测试自定义URL1</button>
          <button id="testCustomUrl2" style="padding: 8px 16px;" data-i18n="testCustomUrl2">测试自定义URL2</button>
        </div>
      </div>
    </div>



<!-- 在面板区域添加新的订阅管理相关面板 -->
    <!-- 爱发电账号面板 废弃隐藏 -->
    <div id="panel-subscription-afdian" class="hidden">
      <h2 data-i18n="afdianAccount">爱发电 | Fans platform from China</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">

        <div class="setting-item" style="margin-bottom: 1px;">
          <br><a href="https://www.bilibili.com/video/BV1RGZ8YbEGh/?share_source=copy_web&vd_source=75fb7167592f6ce5b52cb77ec4a1e41d&t=343" target="_blank">如何爱发电 user_id </a>

          <label for="afdianUserId" style="display: block; margin-bottom: 5px;" data-i18n="userId">User_ID:</label>

          <input type="text" id="afdianUserId" data-auto-save="true" data-storage-key="afdianUserId" data-storage-area="subscriptionConfig" placeholder="请输入爱发电用户ID" style="width: 100%; padding: 8px;">
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <!-- <div class="setting-item" style="margin-bottom: 10px;">
          <label for="afdianToken" style="display: block; margin-bottom: 5px;" data-i18n="accessToken">访问令牌:</label>
          <input type="text" id="afdianToken" data-auto-save="true" data-storage-key="afdianToken" data-storage-area="subscriptionConfig" placeholder="请输入爱发电访问令牌" style="width: 100%; padding: 8px;">
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div> -->
        <!-- <div class="setting-item" style="margin-bottom: 15px;">
          <button id="verifyAfdian" style="padding: 8px 16px;" data-i18n="verifyAccount">验证账号</button>
        </div> -->

        <!-- 多语言提示框 -->
        <div class="multilingual-note">
          <div class="note-title" data-i18n="noteImportant">重要提示</div>

          <div class="note-content">
            <span class="lang-tag lang-en">EN</span>
            <span>
              <br>Old page , no useful.
            </span>
          </div>


          <div class="note-content">
            <span class="lang-tag lang-zh">中</span>
            <span>
              <br>软件目前无使用限制，通过每月在爱发电进行投喂捐赠即可让作者感觉到快乐
              <br>爱发电主页：<a href="https://afdian.com/a/lingkuma" target="_blank">前往爱发电投喂Kuma吃鱼！</a>
              <br>教程：<a href="https://www.bilibili.com/video/BV1RGZ8YbEGh/?share_source=copy_web&vd_source=75fb7167592f6ce5b52cb77ec4a1e41d&t=343" target="_blank">如何获取爱发电 user_id 【精准空降到 05:43】</a>
              <br>谢谢您的发电！☕️❤️ 您的支持是 Kuma 前进的动力！
            </span>
          </div>


        </div>

      </div>
    </div>

    <!-- Kuma账号面板 -->
    <div id="panel-subscription-kuma" class="hidden">
      <h2 data-i18n="kumaAccount">Kuma账号(建设中)</h2>
      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">
        <div class="feature-under-construction">
          <svg data-slot="icon" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="width: 100px; height: 100px;">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75a4.5 4.5 0 0 1-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 1 1-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 0 1 6.336-4.486l-3.276 3.276a3.004 3.004 0 0 0 2.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852Z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.867 19.125h.008v.008h-.008v-.008Z"></path>
          </svg>

          <p data-i18n="featureUnderConstruction">此功能正在建设中，敬请期待！</p>
        </div>
      </div>
    </div>

    <!-- Ohmygpt账号面板 -->
    <div id="panel-subscription-ohmygpt" class="hidden">
      <h2 data-i18n="ohmygptAccount">OhMyGpt Account</h2>


          <!-- 多语言提示框 -->
          <div class="multilingual-note" style="display: none" >
            <div class="note-title" data-i18n="noteImportant">Ohmygpt使用重要声明：</div>
              <div class="note-content">
                <span class="lang-tag lang-en">重要声明</span>
                <span>
                <br>OhMyGpt 是独立的第三方 AI 服务。当您选择通过 Lingkuma 使用 OhMyGpt 时，请务必遵守您所在地的相关法律法规。Lingkuma 仅提供技术接口以连接 OhMyGpt，本身不提供任何 AI 服务内容。您对 OhMyGpt 的使用行为及其产生的所有后果需自行承担全部责任，Lingkuma 对此不承担任何责任。
                <br>OhMyGpt is an independent, third-party AI service. By choosing to use OhMyGpt through Lingkuma, you agree to comply with all applicable local laws and regulations regarding its use. Lingkuma merely provides a technical interface to connect to OhMyGpt and does not provide any AI services itself. You are solely responsible for your usage of OhMyGpt and any consequences that may arise. Lingkuma assumes no liability for your actions or the content generated via OhMyGpt.

                </span>
              </div>
          </div>



      <div class="settings-section" style="padding: 10px;  border-radius: 5px; ">

        <!-- 新增 OhMyGpt 登录/信息区域 -->
        <div class="setting-item" style="margin-bottom: 10px;">
          
          <label for="ohmygptCode" style="display: block; margin-bottom: 5px;" data-i18n="ohmygptRegisterLabel">Register: <a href="https://next.ohmygpt.com/i/G59XB6M4" target="_blank"> 0️⃣ click me to register ,  点击我注册 </a></label>
          
          <label for="ohmygptCode" style="display: block; margin-bottom: 5px;" data-i18n="ohmygptCodeLabel">Code: <a href="https://next.ohmygpt.com/next/v1/oauth?response_type=code&client_id=67d451fdaf7ce14e18a3714f&redirect_uri=https://next.ohmygpt.com/next/v1/oauth/succeed&scope=trusted_advanced_access&state=EXAMPLE_STATE" target="_blank"> 1️⃣ click me to get the code ,  点击我获取授权码 </a></label>
          <input type="text" id="ohmygptCode" placeholder="粘贴你的认证码；paste your code: BTozrIjl4WBTJelx" style="width: 100%; padding: 8px;">
          <!-- Code 是一次性的，不需要自动保存 -->
        </div>
       

        <div class="setting-item" style="margin-bottom: 15px;">
          <button id="getOhmygptTokenBtn" style="padding: 8px 16px;" data-i18n="getOhmygptTokenBtn"> 2️⃣ 认证（login）</button>
          <!-- 用于显示获取状态 -->
          <span id="ohmygptStatus" style="margin-left: 10px; font-size: 14px;"></span>


           <!-- 多语言提示框 -->
           <div class="multilingual-note">
            <!-- <div class="note-title" data-i18n="noteImportant">Above is free</div> -->
              <div class="note-content">
                <span class="lang-tag lang-en">Free</span>
                <span>
                  <br><a href="https://youtu.be/RHh3Upabtfk?si=xosVbgPt_XIGe8VO&t=295" target="_blank">Clik me to Know how to login ; 点我ohmygpt登录视频教程  </a>
                  <br>You are now set up to use OhMyGpt (basic usage is free). Proceeding to Step 3 for donation is optional if you'd like to support Lingkuma.
                  <br>您现在已配置好并可以免费使用 OhMyGpt 的基础功能。如果您希望支持 Lingkuma，可以在下面选择捐赠（此步骤可选）。
                </span>
              </div>
          </div>

        </div>


        <div class="setting-item" style="margin-bottom: 10px;">
          <label for="ohmygptUserId" style="display: block; margin-bottom: 5px;" data-i18n="ohmygptUserIdLabel">User ID:</label>
          <!-- User ID 通过按钮获取，设为只读，但仍需保存 -->
          <input type="text" id="ohmygptUserId" data-storage-key="ohmygptUserId" data-storage-area="subscriptionConfig" placeholder="通过 Code 获取" style="width: 100%; padding: 8px;" readonly>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>

        <div class="setting-item" style="margin-bottom: 10px;">
          <label for="ohmygptToken" style="display: block; margin-bottom: 5px;" data-i18n="ohmygptTokenLabel">Token:</label>
          <!-- Token 通过按钮获取，设为只读和密码类型，但仍需保存 -->
          <input type="password" id="ohmygptToken" data-storage-key="ohmygptToken" data-storage-area="subscriptionConfig" placeholder="通过 Code 获取" style="width: 100%; padding: 8px;" readonly>
          <span class="save-status" style="display: none; color: green; font-size: 12px; margin-top: 5px;">Automatic save complete.</span>
        </div>


        <!-- 横线 -->

        <hr>

          <!-- 多语言提示框 -->
           <!-- 废弃隐藏 -->
          <div class="multilingual-note" style="display: none;">
            <div class="note-title" data-i18n="noteImportant">Now you would like to Donate ; 下面可以进行捐赠</div>
              <div class="note-content">
                <span class="lang-tag lang-en">Donation</span>
                <span>
                  <!-- <br><a href="https://youtu.be/RHh3Upabtfk?si=xosVbgPt_XIGe8VO&t=295" target="_blank">how to login  </a> -->
                  <br>Before donating, please ensure you have a balance (Coins) in Ohmygpt.
                  <br>You will donate to me using your Ohmygpt balance, and the payment process occurs within Ohmygpt.
                  <br>Donate 3.33 USD via OhMyGpt, and as a thank you, we will gift you 30 days with the 10,000 word limit removed.
                  <br>You can donate multiple times, each donation adds 30 days.
                 <br>
                  <br><strong>国内</strong>用户捐赠请通过<strong>爱发电</strong>进行，这里主要收取美刀。
                  <br>捐赠之前请确保Ohmygpt有余额（Coins）,您通过Ohmygpt内的余额向我进行捐赠，您的付款行为在Ohmygpt内进行。
                  <br>捐赠3.33刀可获赠30天的10000单词上限解除,可以捐赠多次，每次增加30天
                  <br>
                </span>
              </div>
          </div>

<!-- 废弃隐藏 -->
 <div class="settings-section" style="padding: 10px;  border-radius: 5px; display: none;">
        <!-- 新增：显示到期时间 -->
        <div class="setting-item" style="margin-bottom: 15px; ">
          <label style="display: block; margin-bottom: 5px;" data-i18n="ohmygptExpiryLabel">Donate to Subscription Expires:</label>
          <span id="ohmygptExpiryDateDisplay" style="font-weight: bold;">N/A</span>
          <!-- 用于显示获取到期时间的状态 -->
          <span id="ohmygptExpiryStatus" style="margin-left: 10px; font-size: 14px;"></span>
        </div>

        <!-- 新增：订阅按钮 -->
        <div class="setting-item" style="margin-bottom: 20px;">
          <button id="ohmygptAddDaysBtn" style="padding: 8px 16px;" data-i18n="ohmygptAdd30DaysBtn"> 3️⃣ Donate 3.33 USD from OhMyGpt to Add 30 Days Subscription </button>
          <!-- <button id="ohmygptAddDaysBtn" style="padding: 8px 16px;" data-i18n="ohmygptAdd30DaysBtn">ohmygpt订阅 内测 1元 增加30天，最多增加90天。</button> -->

          <!-- 用于显示订阅操作的状态 -->
          <span id="ohmygptAddDaysStatus" style="margin-left: 10px; font-size: 14px;"></span>
        </div>
        <hr>
</div>

    </div>

      <div class="settings-section" style="padding: 10px;  border-radius: 5px;">


        <!-- 新增：捐赠区域 -->
        <div class="setting-item donation-section" style="margin-bottom: 10px; border-top: 1px solid var(--border-color); padding-top: 15px;">
          <h3 data-i18n="ohmygptDonateTitle">by Ohmygpt Balance  （Ohmygpt余额捐赠）</h3>
          <label for="ohmygptDonateAmountSlider" style="display: block; margin-bottom: 5px;" data-i18n="ohmygptDonateAmountLabel">Amount (USD):</label>
          <input type="range" id="ohmygptDonateAmountSlider" min="1" max="10" value="1" step="1" style="width: 80%; max-width: 300px;">
          <span id="ohmygptDonateAmountDisplay" style="margin-left: 10px; font-weight: bold;">1 USD (250000 Coins)</span>
        </div>
        <div class="setting-item" style="margin-bottom: 15px;">
           <button id="ohmygptDonateBtn" style="padding: 8px 16px;" data-i18n="ohmygptDonateBtn">Buy Me a Coffee ☕ </button>
           <!-- 用于显示捐赠操作的状态 -->
           <span id="ohmygptDonateStatus" style="margin-left: 10px; font-size: 14px;"></span>
        </div>


          <!-- 多语言提示框 -->
          <div class="multilingual-note">
            <div class="note-title" data-i18n="noteImportant">Note</div>
              <div class="note-content">
                <span class="lang-tag lang-en">EN</span>
                <span>
                  <br>A huge thank you for buying me a coffee! ☕️❤️ Your support is truly appreciated!
                  <br>谢谢您的暖心咖啡！☕️❤️ 您的支持是 Kuma 前进的动力！

                </span>
              </div>
          </div>

        <!-- 保留原来的开发中提示 -->
        <!-- 暂时注释掉，因为我们添加了实际功能
        <div class="feature-under-construction">
          <p data-i18n="featureUnderConstruction"> </p>
        </div>
         -->
      </div>
    </div>















    <!-- 新增 Panel5：EPUB 拆分工具 -->
    <div id="panel-epub" class="hidden">
      <!-- 这里通过 iframe 嵌入现有的 epubSplitter 页面 -->
      <iframe src="./epubSplitter/epubSplitter.html" style="width: 100%; height: 6000px; border: none;"></iframe>
    </div>

    <!-- 新增 PanelX：EPUB 转 Telegra.ph -->
    <div id="panel-epub-telegraph" class="hidden">
      <iframe src="./epubToTelegraph/epubToTelegraph.html" style="width: 100%; height: 6000px; border: none;"></iframe>
    </div>

    <!-- 新增 日语Epub 罗马字清理 -->
    <div id="panel-epub-roman-clean" class="hidden">
      <iframe src="./romanClean/romanClean.html" style="width: 100%; height: 6000px; border: none;"></iframe>
    </div>


    <!-- 新增：关于页面面板 -->
    <div id="panel-about" class="hidden">
      <h2 data-i18n="about">关于</h2>
      <div class="about-content">
        <p></p>


 <!-- 添加多语言提示框 -->
 <div class="multilingual-note">

          <!-- 多语言提示框 -->
          <div class="multilingual-note">
            <div class="note-title" >Contact</div>
              <div class="note-content">
                <span class="lang-tag lang-en">🐳</span>
                <span>
                  <br>Homepage: <a href="https://lingkuma.org/" target="_blank">lingkuma.org</a>
                  <br>Email: <a href="https://mail.google.com/mail/?view=cm&fs=1&to=linghikki@gmail.com" target="_blank" rel="noopener noreferrer">linghikki@gmail.com</a>
                  <br>Discord: <a href="https://discord.gg/upfnqBRnyf" target="_blank">https://discord.gg/upfnqBRnyf</a>
                  <br>Telegram: <a href="https://t.me/Lingkuma" target="_blank">https://t.me/Lingkuma</a>
                  <br>QQ频道: <a href="https://pd.qq.com/s/hbotsiacz" target="_blank">https://pd.qq.com/s/hbotsiacz</a>
                  <br>
                </span>
              </div>
          </div>



 <!-- <div class="note-title" >License</div>  data-i18n="noteImportant" -->
  <div class="note-content">



    <span class="lang-tag lang-en">License</span>
    <span>
      Redistributed Software

      <h2>Third-Party Open Source Software</h2>
      <p>This project utilizes the following third-party open source software, and adheres to their respective open source licenses:</p>
      <table>
        <thead>
          <tr>
            <th style="text-align: left;">Tool</th>
            <th style="text-align: left;">License</th>
            <th style="text-align: left;">Purpose</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><a href="https://github.com/Arcticons-Team/Arcticons" target="_blank">Arcticons</a></td>
            <td>CC BY-SA 4.0</td>
            <td>A monotone line-based icon pack</td>
          </tr>


          <tr>
            <td><a href="https://github.com/Stuk/jszip?tab=readme-ov-file" target="_blank">Stuk/jszip</a></td>
            <td>MIT License</td>
            <td>Reading EPUB files</td>
          </tr>
          <tr>
            <td><a href="https://github.com/eligrey/filesaver.js/?tab=License-1-ov-file" target="_blank">eligrey/FileSaver.js</a></td>
            <td>MIT License</td>
            <td>Saving files</td>
          </tr>
          <tr>
            <td><a href="https://github.com/miseya/kuromoji.js" target="_blank">miseya/kuromoji.js</a></td>
            <td>Apache 2.0 License</td>
            <td>Japanese word segmentation</td>
          </tr>
          <tr>
            <td><a href="https://github.com/perry-mitchell/webdav-client#readme" target="_blank">perry-mitchell/webdav-client</a></td>
            <td>MIT License</td>
            <td>Webdav</td>
          </tr>
          <tr>
            <td><a href="https://github.com/theleagueof/fanwood/blob/master/Open%20Font%20License.markdown" target="_blank">Fanwood</a></td>
            <td>SIL Open Font License</td>
            <td>English Font</td>
          </tr>
          <tr>
            <td><a href="https://github.com/lxgw/LxgwWenkaiGB-Lite" target="_blank">霞鹜文楷 GB 轻便版</a></td>
            <td>SIL Open Font License</td>
            <td>汉语 Font</td>
          </tr>
          <tr>
            <td><a href="https://www.chartjs.org" target="_blank">chart.js</a></td>
            <td> MIT License</td>
            <td>图表</td>
          </tr>
          <tr>
            <td><a href="https://codepen.io/Cubiq/pen/mdgGNoa" target="_blank">Card Filter Showcase | WIP</a></td>
            <td> MIT License</td>
            <td> Liquid glass</td>
          </tr>

          <tr>
            <td><a href="https://codepen.io/rebane2001/details/OPVQXMv" target="_blank">CSS/SVG Liquid Glass effect</a></td>
            <td> MIT License</td>
            <td> Liquid glass</td>
          </tr>
          
          <tr>
            <td><a href="https://core.telegram.org/api/terms" target="_blank">tg APi</a></td>
            <td> free of charge</td>
            <td> backgroud picture / Sticker</td>
          </tr>

          <tr>
            <td><a href="https://github.com/LottieFiles/lottie-player" target="_blank">tgs-player.min.js</a></td>
            <td> MIT License </td>
            <td> Lottie animation</td>
          </tr>

          <tr>
            <td><a href="https://codepen.io/jkantner/pen/ZYWKvqW" target="_blank">Creepy Button</a></td>
            <td> MIT License</td>
            <td> Button HTML</td>
          </tr>



        </tbody>
      </table>

      <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
        <a href="https://terms.lingkuma.org" target="_blank" style="color: #666; text-decoration: none; margin: 0 10px;">Terms of Service</a>
        <a href="https://privacy.lingkuma.org" target="_blank" style="color: #666; text-decoration: none; margin: 0 10px;">Privacy Policy</a>
      </div>







    </span>

    <br>
    <br>

  </div> <!-- multilingual-note end -->









    <br>
    <br>

      </span>
    </div>












  </div>
  <!-- <div class="note-content">
    <span class="lang-tag lang-zh">~</span>
    <span>
    </span>
  </div>
  <div class="note-content">
    <span class="lang-tag lang-ja">~</span>
    <span>
    </span>
  </div> -->
</div>
</div>

        <!-- 你可以继续添加更多内容 -->
      </div>
    </div>
  </div>
  <script src="./webdav/webdav.js"></script>
  <script src="../utils/cloudAPI.js"></script>
  <script src="../utils/dataAccessLayer.js"></script>
  <script src="./options.js"></script>
</body>
</html>